if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((a=>t.resolve(e()).then((()=>a))),(a=>t.resolve(e()).then((()=>{throw a}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e,t,...a){uni.__log__?uni.__log__(e,t,...a):console[e].apply(console,[...a,t])}const a=(e,t)=>{const a=e.__vccOpts||e;for(const[s,o]of t)a[s]=o;return a};const s=a({data:()=>({showSplash:!1,username:""}),methods:{startQuiz(){this.username="user_"+Math.floor(1e4*Math.random()),uni.navigateTo({url:`/pages/experience/experience?username=${this.username}`})},goToLogin(){uni.navigateTo({url:"/pages/login/login"})}},onLoad(e){e.username&&(this.username=e.username)},mounted(){t("log","at pages/landing/landing.vue:51","页面已挂载"),this.$route&&this.$route.query.username&&(this.username=this.$route.query.username,t("log","at pages/landing/landing.vue:55","接收到的用户名:",this.username)),setTimeout((()=>{t("log","at pages/landing/landing.vue:60","隐藏闪屏"),this.showSplash=!1}),2e3)}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[n.showSplash?(e.openBlock(),e.createElementBlock("view",{key:0,class:"splash-screen"},[e.createElementVNode("image",{class:"splash-image",src:"/static/启动页闪屏.png",mode:"widthFix"})])):e.createCommentVNode("",!0),e.createElementVNode("image",{class:"background-image",src:"/static/landingB.png",mode:"widthFix"}),e.createElementVNode("view",{class:"button button1",onClick:a[0]||(a[0]=(...e)=>r.startQuiz&&r.startQuiz(...e))},[e.createElementVNode("text",{class:"button-text"},"开始体验")]),e.createElementVNode("text",{class:"login-text"},"登录已有账号")])}],["__scopeId","data-v-165d9e8e"]]);const o=a({props:{isActive:{type:Boolean,default:!1}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["bar-item",{active:s.isActive}])},null,2)}],["__scopeId","data-v-8f5a6ab8"]]),n="/static/battlefield/back-iconpng.png";const r=a({components:{ProgressBar:o},methods:{navigateToNextPage(){uni.navigateTo({url:"/pages/battlefield/battlefield-loading"})},goback(){uni.navigateTo({url:"/pages/battlefield/battlefield-intro"})}}},[["render",function(t,a,s,o,r,i){const l=e.resolveComponent("progress-bar");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"overlay"}),e.createElementVNode("view",{class:"navbar"},[e.createElementVNode("image",{onClick:a[0]||(a[0]=(...e)=>i.goback&&i.goback(...e)),class:"back-button",src:n}),e.createElementVNode("view",{class:"progress-bar"},[e.createVNode(l,{isActive:!0}),e.createVNode(l,{isActive:!0})])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"task-header"},[e.createElementVNode("text",{class:"main-title"},"老板肚子里的蛔虫"),e.createElementVNode("text",{class:"sub-title"},"本关任务")]),e.createElementVNode("view",{class:"task-list"},[e.createElementVNode("view",{class:"task-item"},[e.createElementVNode("view",{class:"index-circle"},[e.createElementVNode("text",{class:"index-word"}," 1 ")]),e.createElementVNode("text",{class:"task-word"},"得到领导的夸赞")]),e.createElementVNode("view",{class:"task-item"},[e.createElementVNode("view",{class:"index-circle"},[e.createElementVNode("text",{class:"index-word"}," 2 ")]),e.createElementVNode("text",{class:"task-word"},"点出让众人满意的菜品")])])]),e.createElementVNode("view",{class:"continue-button-container"},[e.createElementVNode("button",{class:"continue-btn",onClick:a[1]||(a[1]=(...e)=>i.navigateToNextPage&&i.navigateToNextPage(...e))},"我知道了")])])}],["__scopeId","data-v-20b9b4ab"]]),i="/static/diamond.png",l="/static/Frame3.png";const c=a({data:()=>({score:28,maxScore:100,userId:"",username:"",gender:"",birthday:null,selectedOptions:[],jobId:null,num:null,homepageData:{response:{personal_info:{name:"",tag:"",tag_description:"",job_id:""},eq_scores:{score:0,dimension1_score:0,dimension1_detail:"",dimension2_score:0,dimension2_detail:"",dimension3_score:0,dimension3_detail:"",dimension4_score:0,dimension4_detail:"",dimension5_score:0,dimension5_detail:"",summary:"",detail:"",overall_suggestion:"",detail_summary:""},contacts:[]}},intervalId:null,showSplash:!1,progress:0,progressInterval:null,isExpanded:!1,showPopup:!1,selectedOption:"subordinate",colleagueTags:["摸鱼高手","时间管理大师","潜力股","马屁精","靠谱伙伴"],bossSubordinateTags:["完美主义者","PUA大","加班狂魔","甩锅侠","独裁者"],selectedTags:[],isProfileComplete:!1,profileName:"",roleCards:[{title:"角色卡1"},{title:"角色卡2"},{title:"角色卡3"},{title:"角色卡4"},{title:"角色卡5"}],showNewPopup:!1}),computed:{formattedBirthday(){if(this.birthday){return new Date(this.birthday.year,this.birthday.month-1,this.birthday.day).toLocaleDateString()}return"未设置"},currentMonth:()=>new Intl.DateTimeFormat("zh-CN",{month:"long"}).format(new Date),currentDate:()=>(new Date).getDate(),currentTags(){return"subordinate"===this.selectedOption?this.colleagueTags:"supervisor"===this.selectedOption||"下属"===this.selectedOption?this.bossSubordinateTags:[]},canNavigateToProfile(){return""!==this.profileName.trim()&&this.selectedTags.length>0},userCard(){const e=this.homepageData.response.eq_scores;t("log","at pages/dashboard/dashboard2.vue:147","jobid:",this.jobId),t("log","at pages/dashboard/dashboard2.vue:148","results for backgrounds:",e);const a=Math.min(e.dimension1_score,e.dimension2_score,e.dimension3_score,e.dimension4_score,e.dimension5_score);return a===e.dimension1_score?(t("log","at pages/dashboard/dashboard2.vue:153","usercard src:","水豚"),"/static/dashboard/shuitu.png"):a===e.dimension2_score?(t("log","at pages/dashboard/dashboard2.vue:156","usercard src:","猴子"),"/static/dashboard/houzi.png"):a===e.dimension3_score?(t("log","at pages/dashboard/dashboard2.vue:159","usercard src:","刺猬"),"/static/dashboard/ciwei.png"):a===e.dimension4_score?(t("log","at pages/dashboard/dashboard2.vue:162","usercard src:","鸵鸟"),"/static/dashboard/tuoniao.png"):a===e.dimension5_score?(t("log","at pages/dashboard/dashboard2.vue:165","usercard src:","狼"),"/static/dashboard/lang.png"):void 0}},onLoad(e){t("log","at pages/dashboard/dashboard2.vue:171","Received options:",e),this.userId=e.userId||"",this.username=decodeURIComponent(e.username||""),this.jobId=e.jobId||"",t("log","at pages/dashboard/dashboard2.vue:178","Parsed data:",{userId:this.userId,username:this.username,jobId:this.jobId}),this.getHomepageData(),this.intervalId=setInterval((()=>{this.getHomepageData()}),5e4)},onUnload(){this.intervalId&&clearInterval(this.intervalId),this.progressInterval&&clearInterval(this.progressInterval)},methods:{progressWidth(e){return`${e/this.maxScore*100}%`},circleLeftPosition(e){const a=e/this.maxScore*100,s=.8*uni.getSystemInfoSync().windowWidth;return t("log","at pages/dashboard/dashboard2.vue:212",a),a/100*s},navigateToGuide(){uni.navigateTo({url:`/pages/dashboard/dashboard?userId=${this.userId}&username=${encodeURIComponent(this.username)}&jobId=${this.jobId}`})},getHomepageData(){const e=this;t("log","at pages/dashboard/dashboard2.vue:222","Fetching homepage data with jobId:",this.jobId),uni.request({url:`https://eqmaster.azurewebsites.net/get_homepage/${this.jobId}`,method:"POST",success(a){200===a.statusCode?(e.homepageData=a.data,t("log","at pages/dashboard/dashboard2.vue:229","Homepage data received:",e.homepageData),e.$nextTick((()=>{e.drawRadar()}))):t("error","at pages/dashboard/dashboard2.vue:234","Failed to fetch homepage data:",a.statusCode)},fail(e){t("error","at pages/dashboard/dashboard2.vue:238","Error fetching homepage data:",e)}})},expand(){this.isExpanded=!0},openPopup(){this.showPopup=!0},closePopup(){this.showPopup=!1},selectOption(e){this.selectedOption=e,this.selectedTags=[]},toggleTag(e){const t=this.selectedTags.indexOf(e);t>-1?this.selectedTags.splice(t,1):this.selectedTags.push(e)},createProfile(){t("log","at pages/dashboard/dashboard2.vue:264","创建档案",{name:this.profileName,option:this.selectedOption,tags:this.selectedTags}),this.closePopup()},toProfilePage(){if(this.canNavigateToProfile){const e={personal_name:this.username,name:this.profileName,tag:this.selectedTags.join(","),contact_relationship:this.selectedOption};t("log","at pages/dashboard/dashboard2.vue:282","Sending data to create contact profile:",e),uni.request({url:"https://eqmaster.azurewebsites.net/create_contact_profile",method:"POST",data:e,success:e=>{200===e.statusCode?(t("log","at pages/dashboard/dashboard2.vue:291","Contact profile created successfully:",e.data),uni.navigateTo({url:`/pages/profile/profile?personal_name=${encodeURIComponent(this.username)}&name=${encodeURIComponent(this.profileName)}&jobId=${this.jobId}&relation=${encodeURIComponent(this.selectedOption)}&tags=${encodeURIComponent(JSON.stringify(this.selectedTags))}&contactId=${e.data.contact_id}`})):(t("error","at pages/dashboard/dashboard2.vue:297","Failed to create contact profile:",e.statusCode,e.data),uni.showToast({title:`创建档案失败: ${e.statusCode}`,icon:"none"}))},fail:e=>{t("error","at pages/dashboard/dashboard2.vue:305","Error creating contact profile:",e),uni.showToast({title:"网络错误，请稍后重试",icon:"none"})}})}},navigateToResult(){uni.navigateTo({url:`/pages/result/loading?jobId=${this.jobId}`})},openNewPopup(){this.showNewPopup=!0},closeNewPopup(){this.showNewPopup=!1},navigateToDashboard(){t("log","at pages/dashboard/dashboard2.vue:332","Navigating to guide with data:",{userId:this.userId,username:this.username,jobId:this.homepageData.response.personal_info.job_id}),uni.navigateTo({url:`/pages/dashboard/dashboard?userId=${this.userId}&username=${encodeURIComponent(this.username)}&jobId=${this.homepageData.response.personal_info.job_id}`})},navigateToBattlefieldIntro(){uni.navigateTo({url:"/pages/battlefield/battlefield-intro"})}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("scroll-view",{"scroll-y":"",style:{height:"100%"}},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"card-o"},[e.createElementVNode("view",{class:"card"},[e.createElementVNode("image",{class:"illustration3",src:i,mode:"widthFix"}),e.createElementVNode("text",{class:"score-value-large-y"},e.toDisplayString(Math.round(120)),1)]),e.createElementVNode("view",{class:"card"},[e.createElementVNode("image",{class:"illustration3",src:"/static/dashboard2/star.jpg",mode:"widthFix"}),e.createElementVNode("text",{class:"score-value-large-g"},e.toDisplayString(Math.round(5)),1)])]),e.createElementVNode("image",{class:"illustration31",src:"/static/dashboard2/1.jpg",mode:"widthFix"}),e.createElementVNode("view",{class:"card1-container"},[e.createElementVNode("view",{class:"card1"},[e.createElementVNode("text",{class:"score-value-large1"},"情绪刹车术"+e.toDisplayString(),1),e.createElementVNode("view",{class:"level-badge"},[e.createElementVNode("text",{class:"score-title1"},"Lv1小试牛刀")]),e.createElementVNode("view",{class:"progress-container"},[e.createElementVNode("text",{class:"score-title2"},"情绪掌控力"),e.createElementVNode("view",{class:"progress-bar1"},[e.createElementVNode("view",{class:"progress",style:e.normalizeStyle({width:r.progressWidth(n.homepageData.response.eq_scores.dimension3_score)})},null,4)])])])]),e.createElementVNode("image",{class:"xiuluochang-image",src:"/static/dashboard2/xiuluochang.jpg",mode:"aspectFill"}),e.createElementVNode("image",{class:"illustration35",src:"/static/dashboard2/plgon9.jpg",mode:"widthFix",onClick:a[0]||(a[0]=(...e)=>r.navigateToBattlefieldIntro&&r.navigateToBattlefieldIntro(...e))}),e.createElementVNode("view",{class:"card3"},[e.createElementVNode("image",{class:"illustration36",src:"/static/dashboard2/icon2.jpg",mode:"widthFix",onClick:a[1]||(a[1]=(...e)=>r.navigateToDashboard&&r.navigateToDashboard(...e))}),e.createElementVNode("image",{class:"illustration37",src:"/static/dashboard2/icon1.jpg",mode:"widthFix"}),e.createElementVNode("image",{class:"illustration38",src:l,mode:"widthFix"})])])])])}],["__scopeId","data-v-fb8000d9"]]),d="/static/battlefield/diamond.png";const p=a({props:{gemCount:{type:Number,default:0}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"gem-container"},[e.createElementVNode("image",{class:"gem-icon",src:d,mode:"aspectFit"}),e.createElementVNode("text",{class:"gem-count"},e.toDisplayString(s.gemCount),1)])}],["__scopeId","data-v-5c5f10ee"]]);const m=a({props:{health:{type:Number,default:100},avatar:{type:String,default:"/static/battlefield/boss.png"},characterName:{type:String,default:"老板"}},computed:{healthBarStyle(){const e=this.health<50?"#FF4D4F":"#52C41A";return{width:`${this.health}%`,backgroundColor:e,transition:"width 0.5s ease, background-color 0.5s ease"}}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"character-container"},[e.createElementVNode("view",{class:"blood-container"},[e.createElementVNode("view",{class:"health-bar-container"},[e.createElementVNode("view",{class:"health-bar-line"}),e.createElementVNode("view",{class:"health-bar-background"},[e.createElementVNode("view",{class:"health-bar-foreground",style:e.normalizeStyle(r.healthBarStyle)},null,4)])])]),e.createElementVNode("view",{class:"avatar-container"},[e.createElementVNode("image",{class:"avatar",src:s.avatar,mode:"aspectFill"},null,8,["src"]),e.createElementVNode("text",{class:"character-name"},e.toDisplayString(s.characterName),1)])])}],["__scopeId","data-v-2b24c42b"]]),u="/static/battlefield/character_background.png";const g=a({props:{avatar:{type:String,required:!0},character:{type:String,required:!0},wording:{type:String,required:!0}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"inner-container"},[e.createElementVNode("view",{class:"bubble-container"},[e.createElementVNode("image",{class:"avatar",src:s.avatar,mode:"aspectFill"},null,8,["src"]),e.createElementVNode("view",{class:"background-parent"},[e.createElementVNode("image",{class:"character-background",src:u}),e.createElementVNode("view",{class:"character"},e.toDisplayString(s.character),1)]),e.createElementVNode("text",{class:"wording"},e.toDisplayString(s.wording),1)])])}],["__scopeId","data-v-f5441165"]]);const h=a({props:{title:{type:String,required:!0},wording:{type:String,required:!0,fontColor:"#fff"},goodJudge:{type:Boolean,required:!0}},methods:{onContinue(){t("log","at components/Judge.vue:34","emitting event"),this.$emit("judge",this.goodJudge)}},computed:{bgColor(){return this.goodJudge?"#E8FFC4":"#fff2b4"},fontColor(){return this.goodJudge?"#315B00":"#936A15"},buttonBgColor(){return this.goodJudge?"#A9E55B":"#FFD044"}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"feedback-container",style:e.normalizeStyle({backgroundColor:r.bgColor})},[e.createElementVNode("text",{class:"title",style:e.normalizeStyle({color:r.fontColor})},e.toDisplayString(s.title),5),e.createElementVNode("text",{class:"wording",style:e.normalizeStyle({color:r.fontColor})},e.toDisplayString(s.wording),5),e.createElementVNode("view",{class:"button-container"},[e.createElementVNode("button",{class:"action-button",style:e.normalizeStyle({backgroundColor:r.buttonBgColor}),onClick:a[0]||(a[0]=(...e)=>r.onContinue&&r.onContinue(...e))},"继续",4)])],4)}],["__scopeId","data-v-cf6d4a2b"]]);const v=a({props:{quit:{type:Function,required:!0},help:{type:Function,required:!0},hint:{type:Function,required:!0}},data:()=>({selectedCard:null}),methods:{selectCard(e){t("log","at components/Tipping.vue:73","Selected card:",e),this.selectedCard=e},confirmSelection(){this.selectedCard?(t("log","at components/Tipping.vue:78","Selected card:",this.selectedCard),quit(),"help"===this.selectedCard?help():hint()):uni.showToast({title:"请选择一张卡片",icon:"none"})}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"modal"},[e.createElementVNode("image",{class:"quit",src:"/static/battlefield/quit.png",onClick:a[0]||(a[0]=(...e)=>s.quit&&s.quit(...e))}),e.createElementVNode("view",{class:"modal-header"},[e.createElementVNode("text",{class:"title"},"选择锦囊卡片")]),e.createElementVNode("view",{class:"cards"},[e.createElementVNode("view",{class:e.normalizeClass(["card",{selected:"help"===n.selectedCard}]),onClick:a[1]||(a[1]=e=>r.selectCard("help"))},[e.createElementVNode("image",{class:"card-background",src:"/static/battlefield/tipping-left.png",mode:"scaleToFill"}),e.createElementVNode("view",{class:"card-content"},[e.createElementVNode("text",{class:"card-title"},"帮回卡"),e.createElementVNode("text",{class:"card-description"}," 快速调整你的回答，提升质量，让对话更流畅。 "),e.createElementVNode("view",{class:"card-cost"},[e.createElementVNode("image",{class:"diamond",src:d}),e.createElementVNode("text",null,"60")])])],2),e.createElementVNode("view",{class:e.normalizeClass(["card",{selected:"hint"===n.selectedCard}]),onClick:a[2]||(a[2]=e=>r.selectCard("hint"))},[e.createElementVNode("image",{class:"card-background",src:"/static/battlefield/tipping-right.png",mode:"scaleToFill"}),e.createElementVNode("view",{class:"card-content"},[e.createElementVNode("text",{class:"card-title"},"提示卡"),e.createElementVNode("text",{class:"card-description"}," 提供情绪引导或建议，帮助你更好地理解和回应。 "),e.createElementVNode("view",{class:"card-cost"},[e.createElementVNode("image",{class:"diamond",src:d}),e.createElementVNode("text",null,"20")])])],2)]),e.createElementVNode("view",{class:e.normalizeClass(["confirm-btn",{"not-selected":!n.selectedCard}]),onClick:a[3]||(a[3]=(...e)=>r.confirmSelection&&r.confirmSelection(...e))},[e.createElementVNode("text",{class:"confirm-text"},"确定兑换")],2)])])}],["__scopeId","data-v-b64b1468"]]);const b=a({props:{tip:{type:String,required:!0}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"tip-container"},[e.createElementVNode("image",{class:"tip-background",src:"/static/battlefield/question-mark.png",mode:"widthFix"}),e.createElementVNode("view",{class:"tip-content"},[e.createElementVNode("image",{class:"tip-mark",src:"/static/battlefield/tip-yellow.png"}),e.createElementVNode("text",{class:"tip-text"},e.toDisplayString(s.tip),1)])])}],["__scopeId","data-v-dbf1b340"]]);const N=a({props:{wording:{type:String,required:!0}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"bubble-container"},[e.createElementVNode("text",{class:"txt"},e.toDisplayString(s.wording),1)])}],["__scopeId","data-v-462af371"]]);const f=a({props:{avatar:{type:String,required:!0},name:{type:String,required:!0},dialog:{type:String,required:!0}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"bubble-container"},[e.createElementVNode("view",{class:"background-parent"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("view",{class:"avatar-background"},[e.createElementVNode("image",{class:"avatar",src:s.avatar,mode:"aspectFill"},null,8,["src"])]),e.createElementVNode("view",{class:"name"},[e.createElementVNode("image",{class:"character-background",src:u,mode:"scaleToFill"}),e.createElementVNode("view",{class:"character"},e.toDisplayString(s.name),1)])])]),e.createElementVNode("text",{class:"txt"},e.toDisplayString(s.dialog),1)])}],["__scopeId","data-v-20bdcbbd"]]);function E(e,a,s,o="https://eqmaster.azurewebsites.net/chat/batttlefield"){return new Promise(((n,r)=>{const i=s.map((e=>({...e,role:["领导","同事A","同事B"].includes(e.role)?"assistant":e.role,content:Array.isArray(e.content)?e.content.map((e=>({type:e.type||"text",text:e.text||e}))):e.content})));t("log","at scripts/battlefield-chat.js:16","##begin to evaluate user chat:",i);const l={person_id:e||1,course_id:a||"course",chat_content:JSON.stringify(i)};t("log","at scripts/battlefield-chat.js:24","body:",l),uni.request({url:o,method:"POST",header:{"Content-Type":"application/json"},data:l,success:e=>{t("log","at scripts/battlefield-chat.js:34","请求成功:",e),n(e.data)},fail:e=>{t("error","at scripts/battlefield-chat.js:38","请求失败:",e),r(e)}})}))}function y(e){return"领导"==e?"static/battlefield/boss.png":"同事A"==e?"/static/battlefield/xiaoA.png":"/static/battlefield/xiaoB.png"}const w="/static/battlefield/background.png",I=uni.getRecorderManager();const V=a({components:{RewardBar:p,NpcStatus:m,LargeAvatarBubble:g,Judge:h,Tipping:v,TippingChatBox:b,SelfChatBox:N,NpcChatBox:f},data:()=>({state:"",showTippingCard:!1,talkingNpc:0,displayedNpcChatIndex:0,npcDialog:"NPC dialogue here",someoneTalk:!0,state:"NpcTalk",chattingHistory:[{role:"领导",content:"唉，我最近有点上火，医生嘱咐我要清淡饮食。这些重口味的菜我可真不敢吃了，不然怕是吃完嘴上火气就更旺了。"}],talkingNpc:0,showInput:!1,focusInput:!1,npcs:[{characterName:"领导",health:60,avatar:"/static/battlefield/boss.png"},{characterName:"同事A",health:60,avatar:"/static/battlefield/xiaoA.png"},{characterName:"同事B",health:60,avatar:"/static/battlefield/xiaoB.png"}],tempFilePath:"",isRecording:!1,getBattlefieldAvatar:y}),methods:{handleClickRecording(){this.isRecording=!0,this.startRecording()},startRecording(){I.start({duration:6e4,sampleRate:16e3,numberOfChannels:1,encodeBitRate:16e3,format:"wav"})},handleRecordingDone(){t("log","at pages/battlefield/battlefield-playground.vue:159","Released"),this.isRecording&&(I.stop(),this.isRecording=!1)},getNextState(){"NpcTalk"===this.state&&0===this.chattingHistory.length&&(t("log","at pages/battlefield/battlefield-playground.vue:168","Dismiss npc"),this.state="userTalk")},handleJudgeContinue(e){t("log","at pages/battlefield/battlefield-playground.vue:175","Judge continue clicked."),this.state=e?"NpcTalk":"userTalk"},handleTippingQuit(){t("log","at pages/battlefield/battlefield-playground.vue:183","Clicked quit tipping"),this.state="userTalk"},help(){t("log","at pages/battlefield/battlefield-playground.vue:187","Choose help card")},hint(){t("log","at pages/battlefield/battlefield-playground.vue:190","Choose hint card")},clickHintButton(){this.state="hint"},uploadAndRecognizeSpeech:e=>new Promise(((a,s)=>{uni.uploadFile({url:"https://eqmaster.azurewebsites.net/upload-audio/",filePath:e,name:"file",header:{"Content-Type":"multipart/form-data"},success:e=>{t("log","at pages/battlefield/battlefield-playground.vue:206","文件上传成功:",e);const s=JSON.parse(e.data).transcript;a(s)},fail:e=>{t("error","at pages/battlefield/battlefield-playground.vue:212","文件上传失败:",e),s(e)}})})),dismissNpcTalk(){let e=!1;const a=this.chattingHistory;for(let t=this.displayedNpcChatIndex+1;t<a.length;t++)if("user"!=a[t].role){this.displayedNpcChatIndex=t,this.talkingNpc=this.getNpcIndexByName(a[t].role),this.npcDialog=a[t].content,e=!0;break}e||(t("log","at pages/battlefield/battlefield-playground.vue:233","no more npc, now user turn."),this.state="userTalk")},getNpcIndexByName(e){return this.npcs.findIndex((t=>t.characterName===e))},handleContainerClick(){"NpcTalk"===this.state&&this.dismissNpcTalk()},initRecorderManager(){I.onStart((()=>{t("log","at pages/battlefield/battlefield-playground.vue:251","Recorder start")})),I.onStop((async e=>{t("log","at pages/battlefield/battlefield-playground.vue:254","Recorder stop",e);const a=e.tempFilePath;try{const e=await this.uploadAndRecognizeSpeech(a);t("log","at pages/battlefield/battlefield-playground.vue:259","识别结果:",e),this.chattingHistory.push({role:"user",content:e});const s=function(e){const t=["继续","给我提示","帮我回答","开始测试"];return e.filter((e=>{for(let a of t)if(e.content.includes(a))return!1;return!0}))}(this.chattingHistory);t("warn","at pages/battlefield/battlefield-playground.vue:268","judge result:",await async function(e){return await E(e.person_id,e.course_id,e)}(s))}catch(s){t("error","at pages/battlefield/battlefield-playground.vue:272","在用户说话反馈过程中有错发生哦：",s)}}))}},onLoad(e){uni.getStorage({key:"chats",success:e=>{t("log","at pages/battlefield/battlefield-playground.vue:282","chatting histories,",e.data),this.chattingHistory=e.data}}),this.initRecorderManager()},computed:{shouldShadow(){return"NpcTalk"===this.state||this.isRecording||this.showTippingCard}}},[["render",function(t,a,s,o,r,i){const l=e.resolveComponent("reward-bar"),c=e.resolveComponent("npc-status"),d=e.resolveComponent("self-chat-box"),p=e.resolveComponent("npc-chat-box"),m=e.resolveComponent("tipping-chat-box"),u=e.resolveComponent("large-avatar-bubble"),g=e.resolveComponent("tipping"),h=e.resolveComponent("judge");return e.openBlock(),e.createElementBlock("view",{class:"container",onClick:a[5]||(a[5]=(...e)=>i.handleContainerClick&&i.handleContainerClick(...e))},[e.createElementVNode("image",{class:"background-image",src:w,mode:"aspectFill"}),e.createElementVNode("view",{class:"overlay"}),e.createElementVNode("view",{class:e.normalizeClass(["navbar",{shadowed:i.shouldShadow}])},[e.createElementVNode("image",{class:"back-button",src:n}),e.createVNode(l,{gemCount:100}),e.createElementVNode("view",{class:"setting-group"},[e.createElementVNode("image",{class:"setting-item",src:"/static/battlefield/copy.png"}),e.createElementVNode("image",{class:"setting-item",src:"/static/battlefield/setting.png"})])],2),e.createElementVNode("view",{class:e.normalizeClass(["npc-group",{shadowed:i.shouldShadow}])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.npcs,(t=>(e.openBlock(),e.createBlock(c,{key:t.characterName,health:t.health,avatar:t.avatar,characterName:t.characterName},null,8,["health","avatar","characterName"])))),128))],2),"NpcTalk"!=r.state?(e.openBlock(),e.createElementBlock("view",{key:0,class:e.normalizeClass(["chat-history-container",{shadowed:i.shouldShadow}])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.chattingHistory,((t,a)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,["user"===t.role?(e.openBlock(),e.createBlock(d,{key:a,wording:t.content},null,8,["wording"])):"领导"===t.role||"同事A"===t.role||"同事B"===t.role?(e.openBlock(),e.createBlock(p,{key:"npc-"+a,avatar:r.getBattlefieldAvatar(t.role),name:t.role,dialog:t.content},null,8,["avatar","name","dialog"])):"tipping"===t.role?(e.openBlock(),e.createBlock(m,{key:"tipping"+a,tip:t.content},null,8,["tip"])):e.createCommentVNode("",!0)],64)))),256))],2)):e.createCommentVNode("",!0),"NpcTalk"===r.state?(e.openBlock(),e.createElementBlock("view",{key:1,class:"npc-talk-container"},[e.createVNode(u,{avatar:r.npcs[r.talkingNpc].avatar,character:r.npcs[r.talkingNpc].characterName,wording:r.chattingHistory[r.displayedNpcChatIndex].content},null,8,["avatar","character","wording"])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:e.normalizeClass(["player-action-container",{shadowed:i.shouldShadow}])},[r.isRecording?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:0,class:"action-item",onClick:a[0]||(a[0]=e=>{r.showInput=!0,r.focusInput=!0})},[e.createElementVNode("image",{class:"action-icon",src:"/static/battlefield/keyboard.png"})])),e.createElementVNode("view",{class:"middle-container"},[e.createElementVNode("view",{class:"action-item action-item-middle",onTouchstart:a[1]||(a[1]=(...e)=>i.handleClickRecording&&i.handleClickRecording(...e)),onTouchend:a[2]||(a[2]=(...e)=>i.handleRecordingDone&&i.handleRecordingDone(...e))},[e.createElementVNode("image",{class:"action-icon action-icon-middle",src:"/static/battlefield/microphone.png"})],32)]),r.isRecording?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:1,class:"action-item"},[e.createElementVNode("image",{class:"action-icon",src:"/static/battlefield/streamline.png",onClick:a[3]||(a[3]=(...e)=>i.clickHintButton&&i.clickHintButton(...e))})]))],2),r.showTippingCard?(e.openBlock(),e.createElementBlock("view",{key:2,class:"tipping-card"},[e.createVNode(g,{quit:i.handleTippingQuit,hint:i.hint,help:i.help},null,8,["quit","hint","help"])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"keyboard-container"},[r.showInput?(e.openBlock(),e.createElementBlock("view",{key:0,class:"input-container"},[e.createElementVNode("input",{type:"text",focus:r.focusInput,placeholder:"请输入...",onBlur:a[4]||(a[4]=e=>r.showInput=!1)},null,40,["focus"])])):e.createCommentVNode("",!0)]),"judge"===r.state?(e.openBlock(),e.createElementBlock("view",{key:3,class:"judge-container"},[e.createVNode(h,{title:"well done",wording:"做的很好，考虑了大家的感受",onJudge:i.handleJudgeContinue,"good-judge":!0},null,8,["onJudge"])])):e.createCommentVNode("",!0)])}],["__scopeId","data-v-f0e76ace"]]);const k=a({components:{ProgressBar:o},methods:{navigateToNextPage(){uni.navigateTo({url:"/pages/battlefield/battlefield-task"})}}},[["render",function(t,a,s,o,r,i){const l=e.resolveComponent("progress-bar");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"overlay"}),e.createElementVNode("view",{class:"navbar"},[e.createElementVNode("image",{class:"back-button",src:n}),e.createElementVNode("view",{class:"progress-bar"},[e.createVNode(l,{isActive:!0}),e.createVNode(l,{isActive:!1})])]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("text",{class:"title content-item"},"第一关"),e.createElementVNode("text",{class:"subtitle content-item"},"老板肚子里的蛔虫"),e.createElementVNode("text",{class:"time-info content-item"},"3-4分钟"),e.createElementVNode("text",{class:"description content-item"}," 在一个精致的会所包厢里，你与一位高层领导和两名同事共进晚餐。看似轻松的聚会，实际上领导在暗中观察你们，准备决定谁将参与重要项目。你必须讨好领导，同时平衡同事关系，因为一个小小的失误可能改变你的未来。 ")]),e.createElementVNode("view",{class:"continue-button-container"},[e.createElementVNode("button",{class:"continue-btn",onClick:a[0]||(a[0]=(...e)=>i.navigateToNextPage&&i.navigateToNextPage(...e))},"继续")])])}],["__scopeId","data-v-427c05be"]]),x="/static/cta.png";const _=a({data:()=>({score:28,maxScore:100,userId:"",username:"",gender:"",birthday:null,selectedOptions:[],jobId:null,num:null,homepageData:{response:{personal_info:{name:"",tag:"",tag_description:"",job_id:""},eq_scores:{score:0,dimension1_score:0,dimension1_detail:"",dimension2_score:0,dimension2_detail:"",dimension3_score:0,dimension3_detail:"",dimension4_score:0,dimension4_detail:"",dimension5_score:0,dimension5_detail:"",summary:"",detail:"",overall_suggestion:"",detail_summary:""},contacts:[]}},intervalId:null,progress:0,progressInterval:null,splashImageLeft1:0,splashImageLeft2:2e3,imageWidth:2e3,interval:null,isExpanded:!1,timeoutInterval:null}),computed:{formattedBirthday(){if(this.birthday){return new Date(this.birthday.year,this.birthday.month-1,this.birthday.day).toLocaleDateString()}return"未设置"}},onLoad(e){try{if(this.userId=e.userId||"",this.username=decodeURIComponent(e.username||""),this.gender=e.gender||"",this.jobId=e.jobId||"",this.num=e.num||"",e.options)try{this.selectedOptions=JSON.parse(decodeURIComponent(e.options))}catch(a){t("error","at pages/result/loading.vue:96","Error parsing options:",a),this.selectedOptions=[]}if(e.birthday)try{this.birthday=JSON.parse(decodeURIComponent(e.birthday))}catch(a){t("error","at pages/result/loading.vue:105","Error parsing birthday:",a),this.birthday=null}t("log","at pages/result/loading.vue:110","Parsed data:",{userId:this.userId,username:this.username,gender:this.gender,selectedOptions:this.selectedOptions,birthday:this.birthday,jobId:this.jobId,num:this.num})}catch(a){t("log","at pages/result/loading.vue:120","something error happend",a)}this.getHomepageData()},onUnload(){this.intervalId&&clearInterval(this.intervalId),this.progressInterval&&clearInterval(this.progressInterval),this.interval&&clearInterval(this.interval)},methods:{progressWidth(e){return`${e/this.maxScore*100}%`},circleLeftPosition(e){const a=e/this.maxScore*100,s=.8*uni.getSystemInfoSync().windowWidth;return t("log","at pages/result/loading.vue:148",a),a/100*s},getHomepageData(){const e=this;uni.request({url:`https://eqmaster.azurewebsites.net/get_homepage/${this.jobId}`,method:"POST",success(a){let s={};if(200===a.statusCode)s=a.data,t("log","at pages/result/loading.vue:160","Homepage data received:",s);else{s={response:{personal_info:{name:"John Doe",tag:"Engineer",tag_description:"A detail-oriented engineer with a passion for problem-solving.",job_id:"12345"},eq_scores:{score:46,dimension1_score:54,dimension1_detail:"Shows excellent emotional regulation in stressful situations.",dimension2_score:26,dimension2_detail:"Displays strong empathy towards others' feelings.",dimension3_score:42,dimension3_detail:"Able to make decisions without letting emotions interfere.",dimension4_score:50,dimension4_detail:"Communicates emotions clearly and effectively.",dimension5_score:44,dimension5_detail:"Manages interpersonal relationships with ease.",summary:"Overall, emotionally intelligent and adaptive.",detail:"John demonstrates balanced emotional intelligence across all areas.",overall_suggestion:"Continue to enhance emotional regulation and interpersonal communication.",detail_summary:"A well-rounded emotional intelligence profile with strong interpersonal skills."}}},t("error","at pages/result/loading.vue:191","Failed to fetch homepage data:",a.statusCode)}e.interval&&(clearInterval(e.interval),e.interval=null),e.progressInterval&&(clearInterval(e.progressInterval),e.interval=null),e.timeoutInterval&&(clearInterval(e.timeoutInterval),e.timeoutInterval=null);const o=`/pages/result/result?userId=${this.userId||"some user id"}&username=${encodeURIComponent(this.username||"some username")}`;uni.setStorage({key:"response",data:s}),t("log","at pages/result/loading.vue:216","begin to navigate"),uni.navigateTo({url:o,fail:e=>{t("error","at pages/result/loading.vue:220","Navigation failed:",e),uni.showToast({title:"页面跳转失败",icon:"none"})}})},fail(e){t("error","at pages/result/loading.vue:229","Error fetching homepage data:",e)}})},startProgress(){this.progressInterval=setInterval((()=>{this.progress<100?this.progress+=1:clearInterval(this.progressInterval)}),300)},animateImage(){this.interval=setInterval((()=>{this.splashImageLeft1-=10,this.splashImageLeft2-=10,this.splashImageLeft1<=-this.imageWidth&&(this.splashImageLeft1=this.splashImageLeft2+this.imageWidth),this.splashImageLeft2<=-this.imageWidth&&(this.splashImageLeft2=this.splashImageLeft1+this.imageWidth)}),30)},expand(){this.isExpanded=!0}},mounted(){this.startProgress(),this.animateImage(),this.timeoutInterval=setTimeout((()=>{this.interval&&(t("log","at pages/result/loading.vue:273","cancel splash by timeout."),clearInterval(this.interval))}),3e4)},beforeDestroy(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.progressInterval&&(clearInterval(this.progressInterval),this.progressInterval=null),this.interval&&(clearInterval(this.interval),this.interval=null)}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"splash-screen"},[e.createElementVNode("text",{class:"splash-text"},"接下来，\\n一起来看看你的职场人格类型吧！"),e.createElementVNode("image",{class:"splash-image",src:x,mode:"widthFix",style:e.normalizeStyle({left:n.splashImageLeft1+"rpx"})},null,4),e.createElementVNode("image",{class:"splash-image",src:x,mode:"widthFix",style:e.normalizeStyle({left:n.splashImageLeft2+"rpx"})},null,4),e.createElementVNode("text",{class:"splash-progress-text"},e.toDisplayString(n.progress)+"%",1),e.createElementVNode("view",{class:"splash-progress-bar"},[e.createElementVNode("view",{class:"splash-progress-fill",style:e.normalizeStyle({width:n.progress+"%"})},null,4)]),e.createElementVNode("text",{class:"status-text"},"努力分析中...")])])}],["__scopeId","data-v-2f9700b5"]]);const C="/static/back.png",S="/static/green.png",T="/static/expand.png";const D=a({data:()=>({score:28,maxScore:100,userId:"",username:"",gender:"",birthday:null,homepageData:{response:{personal_info:{name:"",tag:"",tag_description:"",job_id:""},eq_scores:{score:0,dimension1_score:0,dimension1_detail:"",dimension2_score:0,dimension2_detail:"",dimension3_score:0,dimension3_detail:"",dimension4_score:0,dimension4_detail:"",dimension5_score:0,dimension5_detail:"",summary:"",detail:"",overall_suggestion:"",detail_summary:""},contacts:[]}},progress:0,imageWidth:2e3,isExpanded:!1}),computed:{formattedBirthday(){if(this.birthday){return new Date(this.birthday.year,this.birthday.month-1,this.birthday.day).toLocaleDateString()}return"未设置"},illustrationSrc(){const e=this.homepageData.response.eq_scores;t("log","at pages/result/result.vue:218","results for backgrounds:",e);const a=Math.min(e.dimension1_score,e.dimension2_score,e.dimension3_score,e.dimension4_score,e.dimension5_score);return a===e.dimension1_score?(t("log","at pages/result/result.vue:224","illustration src:","1"),"/static/aniimals/kapibala.png"):a===e.dimension2_score?(t("log","at pages/result/result.vue:227","illustration src:","2"),"/static/aniimals/houzi.png"):a===e.dimension3_score?(t("log","at pages/result/result.vue:230","illustration src:","3"),"/static/aniimals/ciwei.png"):a===e.dimension4_score?(t("log","at pages/result/result.vue:233","illustration src:","4"),"/static/aniimals/tuoniao.png"):a===e.dimension5_score?(t("log","at pages/result/result.vue:236","illustration src:","5"),"/static/aniimals/lang.png"):void 0}},onLoad(e){t("log","at pages/result/result.vue:242","option",e),this.userId=e.userId||"",this.username=decodeURIComponent(e.username||"");try{uni.getStorage({key:"response",success:e=>{t("log","at pages/result/result.vue:250","########successfully retrieved data",e),this.homepageData=e.data,t("log","at pages/result/result.vue:252","begin to draw radar"),this.drawRadar()}})}catch(a){t("log","at pages/result/result.vue:257","something error happened",a)}},onUnload(){this.intervalId&&clearInterval(this.intervalId),this.progressInterval&&clearInterval(this.progressInterval),this.interval&&clearInterval(this.interval)},methods:{progressWidth(e){return`${e/this.maxScore*100}%`},circleLeftPosition(e){const a=e/this.maxScore*100,s=.8*uni.getSystemInfoSync().windowWidth;return t("log","at pages/result/result.vue:283",a),a/100*s},drawRadar(){t("log","at pages/result/result.vue:288","======begin to draw radar chart, data:",this.homepageData.response);const e=[{subject:"维度1",A:this.homepageData.response.eq_scores.dimension1_score||0,fullMark:100},{subject:"维度2",A:this.homepageData.response.eq_scores.dimension2_score||0,fullMark:100},{subject:"维度3",A:this.homepageData.response.eq_scores.dimension3_score||0,fullMark:100},{subject:"维度4",A:this.homepageData.response.eq_scores.dimension4_score||0,fullMark:100},{subject:"维度5",A:this.homepageData.response.eq_scores.dimension5_score||0,fullMark:100}];t("log","at pages/result/result.vue:315","Draw radar started"),function(e,a){t("log","at scripts/draw_radar.js:22","started to draw radar chart"),t("log","at scripts/draw_radar.js:23","data",a);try{var s=uni.createCanvasContext(e);s.width=300,s.height=300;const o={x:s.width/2,y:s.height/2+40},n=Math.min(s.width,s.height)/2-35;s.clearRect(0,0,s.width,s.height),t("log","at scripts/draw_radar.js:35","width:height",s.width,s.height);const r=a.length,i=2*Math.PI/r,l=-Math.PI/2;s.setStrokeStyle("#aaa8ac"),s.setLineWidth(1);for(let e=1;e<=2;e++){s.beginPath();for(let t=0;t<=r;t++){const a=l+t*i,r=o.x+n*(e/2)*Math.cos(a),c=o.y+n*(e/2)*Math.sin(a);0===t?s.moveTo(r,c):s.lineTo(r,c)}s.closePath(),s.stroke()}for(let e=0;e<r;e++){const t=l+e*i,a=o.x+n*Math.cos(t),r=o.y+n*Math.sin(t);s.beginPath(),s.moveTo(o.x,o.y),s.lineTo(a,r),s.stroke()}s.beginPath(),s.setFillStyle("rgba(164, 163, 171, 0.3)"),s.setStrokeStyle("rgba(158, 228, 77, 0.8)"),s.setLineWidth(4);for(let e=0;e<=r;e++){const t=l+e*i,c=a[e%r].A/a[e%r].fullMark,d=o.x+n*c*Math.cos(t),p=o.y+n*c*Math.sin(t);0===e?s.moveTo(d,p):s.lineTo(d,p)}s.closePath(),s.fill(),s.stroke(),s.setFillStyle("rgba(158, 228, 77, 0.8)");for(let e=0;e<r;e++){const t=l+e*i,r=a[e].A/a[e].fullMark,c=o.x+n*r*Math.cos(t),d=o.y+n*r*Math.sin(t);s.beginPath(),s.arc(c,d,3,0,2*Math.PI),s.fill()}s.draw()}catch(o){t("log","at scripts/draw_radar.js:108",o)}}("radarCanvas",e),t("log","at pages/result/result.vue:317","Draw radar stopped")},navigateToGuide(){t("log","at pages/result/result.vue:320","Navigating to guide with data:",{userId:this.userId,username:this.username,jobId:this.homepageData.response.personal_info.job_id}),uni.navigateTo({url:`/pages/dashboard/dashboard?userId=${this.userId}&username=${encodeURIComponent(this.username)}&jobId=${this.homepageData.response.personal_info.job_id}`})},expand(){this.isExpanded=!0}}},[["render",function(t,a,s,o,n,r){const i=e.resolveComponent("vew");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("scroll-view",{"scroll-y":"",style:{height:"100%"}},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("image",{class:"header-icon",src:C}),e.createElementVNode("text",{class:"score-title-head"},"我的检测结果"),e.createElementVNode("image",{class:"header-icon",src:"/static/battlefield/share.png"})]),e.createElementVNode("view",{class:"background-curve"}),e.createElementVNode("image",{class:"illustration1",src:r.illustrationSrc,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"card"},[e.createElementVNode("view",{class:"average-score-container"},[e.createElementVNode("text",{class:"score-title"},"情商得分: "+e.toDisplayString(n.homepageData.response.eq_scores.score),1)]),e.createElementVNode("canvas",{id:"radarCanvas","canvas-id":"radarCanvas",class:"radar-canvas",width:"400",height:"400"}),e.createElementVNode("view",{class:"emotion-detection-box1"},[e.createElementVNode("text",{class:"emotion-detection-title"},"情绪侦查力")]),e.createElementVNode("view",{class:"emotion-detection-box2"},[e.createElementVNode("text",{class:"emotion-detection-title"},"社交得体度")]),e.createElementVNode("view",{class:"emotion-detection-box3"},[e.createElementVNode("text",{class:"emotion-detection-title"},"沟通表达力")]),e.createElementVNode("view",{class:"emotion-detection-box4"},[e.createElementVNode("text",{class:"emotion-detection-title"},"情绪掌控力")]),e.createElementVNode("view",{class:"emotion-detection-box5"},[e.createElementVNode("text",{class:"emotion-detection-title"},"人际平衡力")]),e.createElementVNode("view",{class:"subtitle-container"},[e.createElementVNode("text",{class:"subtitle"},"问题诊断"),e.createElementVNode("image",{class:"title-sub-line",src:S,mode:"scaleToFill"})]),e.createElementVNode("view",{class:"card-text-container"},[e.createElementVNode("text",{class:"card-title"},e.toDisplayString(n.homepageData.response.eq_scores.summary),1),e.createElementVNode("text",{class:"card-description"},e.toDisplayString(n.homepageData.response.eq_scores.overall_suggestion),1)])]),e.createElementVNode("view",{class:"card"},[e.createElementVNode("view",{class:"subtitle-container"},[e.createElementVNode("text",{class:"subtitle"},"提升指南"),e.createElementVNode("image",{class:"title-sub-line",src:S,mode:"scaleToFill"})]),e.createElementVNode("image",{class:"illustration4",src:"/static/star.png",mode:"widthFix"}),e.createElementVNode("image",{class:"illustration5",src:"/static/up.png",mode:"widthFix"}),e.createElementVNode("image",{class:"illustration6",src:"/static/up3.png",mode:"widthFix"}),e.createElementVNode("view",{class:"card-text-container"},[e.createElementVNode("text",{class:"card-title"},e.toDisplayString(n.homepageData.response.eq_scores.detail_summary),1),e.createElementVNode("text",{class:"card-description"},e.toDisplayString(n.homepageData.response.eq_scores.detail),1)])]),e.createElementVNode("view",{class:"card"},[e.createElementVNode("view",{class:"subtitle-container"},[e.createElementVNode("text",{class:"subtitle"},"详细报告"),e.createElementVNode("image",{class:"title-sub-line",src:S,mode:"scaleToFill"})]),e.createElementVNode("view",{class:"score-container1"},[e.createElementVNode("text",{class:"score-title1"},"情绪侦查力"),e.createElementVNode("view",{class:"progress-container"},[e.createElementVNode("view",{class:"progress-bar1"},[e.createElementVNode("view",{class:"progress",style:e.normalizeStyle({width:r.progressWidth(n.homepageData.response.eq_scores.dimension1_score)})},null,4)]),e.createElementVNode("text",{class:"score-title2"},e.toDisplayString(n.homepageData.response.eq_scores.dimension1_score)+"%",1)]),e.createElementVNode("text",{class:"card-description"},e.toDisplayString(n.homepageData.response.eq_scores.dimension1_detail),1)]),e.createElementVNode("view",{class:"score-container1"},[e.createElementVNode("text",{class:"score-title1"},"社交得体度"),e.createElementVNode("view",{class:"progress-container"},[e.createElementVNode("view",{class:"progress-bar1"},[e.createElementVNode("view",{class:"progress",style:e.normalizeStyle({width:r.progressWidth(n.homepageData.response.eq_scores.dimension2_score)})},null,4)]),e.createElementVNode("text",{class:"score-title2"},e.toDisplayString(n.homepageData.response.eq_scores.dimension2_score)+"%",1)]),e.createElementVNode("text",{class:"card-description"},e.toDisplayString(n.homepageData.response.eq_scores.dimension2_detail),1)]),n.isExpanded?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("image",{key:0,onClick:a[0]||(a[0]=(...e)=>r.expand&&r.expand(...e)),src:T,class:"expand-image"})),n.isExpanded?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("view",{key:1,class:"bottom"},[e.createElementVNode("text",{class:"bottom-text"},"-到底啦-")])),n.isExpanded?(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createElementVNode("view",{class:"score-container1"},[e.createElementVNode("text",{class:"score-title1"},"情绪掌控力"),e.createElementVNode("view",{class:"progress-container"},[e.createElementVNode("view",{class:"progress-bar1"},[e.createElementVNode("view",{class:"progress",style:e.normalizeStyle({width:r.progressWidth(n.homepageData.response.eq_scores.dimension3_score)})},null,4)]),e.createElementVNode("text",{class:"score-title2"},e.toDisplayString(n.homepageData.response.eq_scores.dimension3_score)+"%",1)]),e.createElementVNode("text",{class:"card-description"},e.toDisplayString(n.homepageData.response.eq_scores.dimension3_detail),1)]),e.createElementVNode("view",{class:"score-container1"},[e.createElementVNode("text",{class:"score-title1"},"沟通表达力"),e.createElementVNode("view",{class:"progress-container"},[e.createElementVNode("view",{class:"progress-bar1"},[e.createElementVNode("view",{class:"progress",style:e.normalizeStyle({width:r.progressWidth(n.homepageData.response.eq_scores.dimension4_score)})},null,4)]),e.createElementVNode("text",{class:"score-title2"},e.toDisplayString(n.homepageData.response.eq_scores.dimension4_score)+"%",1)]),e.createElementVNode("text",{class:"card-description"},e.toDisplayString(n.homepageData.response.eq_scores.dimension4_detail),1)]),e.createElementVNode("view",{class:"score-container1"},[e.createElementVNode("text",{class:"score-title1"},"人际平衡力"),e.createElementVNode("view",{class:"progress-container"},[e.createElementVNode("view",{class:"progress-bar1"},[e.createElementVNode("view",{class:"progress",style:e.normalizeStyle({width:r.progressWidth(n.homepageData.response.eq_scores.dimension5_score)})},null,4)]),e.createElementVNode("text",{class:"score-title2"},e.toDisplayString(n.homepageData.response.eq_scores.dimension5_score)+"%",1)]),e.createElementVNode("text",{class:"card-description"},e.toDisplayString(n.homepageData.response.eq_scores.dimension5_detail),1)]),e.createVNode(i,{class:"place-holder"})],64)):e.createCommentVNode("",!0)]),e.createElementVNode("button",{class:"guide-button",onClick:a[1]||(a[1]=(...e)=>r.navigateToGuide&&r.navigateToGuide(...e))},"开启高情商之旅")])])])}],["__scopeId","data-v-4a090e1b"]]),B="/static/bg1.png",O="/static/sign.png";const P=a({data:()=>({userInfoStyle:{bottom:"180px",left:"50%",marginLeft:"-65px"},userId:"",username:"",gender:"",selectedOptions:[],birthday:null,scenarioData:null,background:"",description:"",selectedOptionIndex:null,num:null,jobId:null,baseURL:"https://eqmaster.azurewebsites.net"}),onLoad(e){if(t("log","at pages/test/test5.vue:49","Received options:",e),this.userId=e.userId||"",this.username=decodeURIComponent(e.username||""),this.gender=e.gender||"",this.jobId=e.jobId||"",e.options)try{this.selectedOptions=JSON.parse(decodeURIComponent(e.options))}catch(a){t("error","at pages/test/test5.vue:61","Error parsing options:",a),this.selectedOptions=[]}if(e.birthday)try{this.birthday=JSON.parse(decodeURIComponent(e.birthday))}catch(a){t("error","at pages/test/test5.vue:70","Error parsing birthday:",a),this.birthday=null}t("log","at pages/test/test5.vue:75","Parsed data:",{userId:this.userId,username:this.username,gender:this.gender,selectedOptions:this.selectedOptions,birthday:this.birthday,jobId:this.jobId}),this.getScenarioData()},methods:{updateUserInfoPosition(e,t){this.userInfoStyle.left=`${e}px`,this.userInfoStyle.bottom=`${t}px`,this.userInfoStyle.marginLeft="0px"},selectOption(e){this.selectedOptionIndex=e,this.num=e+1,t("log","at pages/test/test5.vue:97","Selected option:",this.num,this.scenarioData.options[e].text),this.scenarioData.options.forEach(((t,a)=>{t.textColor=a===e?"black":"white"}))},navigateToTest1(){const e=`/pages/test/test3?jobId=${this.jobId}&userId=${this.userId}&username=${encodeURIComponent(this.username)}&gender=${this.gender}&birthday=${encodeURIComponent(JSON.stringify(this.birthday))}&options=${encodeURIComponent(JSON.stringify(this.selectedOptions))}&num=${this.num}`;uni.navigateTo({url:e})},nextPage(){null!==this.num?(t("log","at pages/test/test5.vue:121","Sending data to backend:",{choice:this.num,job_id:this.jobId}),uni.request({url:`${this.baseURL}/choose_scenario`,method:"POST",data:{choice:this.num,job_id:this.jobId},success:e=>{if(t("log","at pages/test/test5.vue:134","Full response:",e),200===e.statusCode){const a=e.data;let s;t("log","at pages/test/test5.vue:138","Response data:",a),s="Final choice made. Processing data in background."===a.message?`/pages/result/loading?jobId=${this.jobId}&userId=${this.userId}&username=${encodeURIComponent(this.username)}&gender=${this.gender}&birthday=${encodeURIComponent(JSON.stringify(this.birthday))}&options=${encodeURIComponent(JSON.stringify(this.selectedOptions))}&num=${this.num}`:`/pages/test/test3?jobId=${this.jobId}&userId=${this.userId}&username=${encodeURIComponent(this.username)}&gender=${this.gender}&birthday=${encodeURIComponent(JSON.stringify(this.birthday))}&options=${encodeURIComponent(JSON.stringify(this.selectedOptions))}&num=${this.num}`,t("log","at pages/test/test5.vue:149","Navigating to:",s),uni.navigateTo({url:s,fail:e=>{t("error","at pages/test/test5.vue:154","Navigation failed:",e),uni.showToast({title:"页面跳转失败",icon:"none"})}})}else uni.showToast({title:`请求失败，状态码：${e.statusCode}`,icon:"none"})},fail:e=>{t("error","at pages/test/test5.vue:169","Detailed error:",e),uni.showToast({title:`发生错误：${e.errMsg}`,icon:"none"})}})):uni.showToast({title:"请选择一个选项",icon:"none"})},getScenarioData(){uni.request({url:`${this.baseURL}/get_current_scenario/${this.jobId}`,method:"POST",success:e=>{t("log","at pages/test/test5.vue:182","Scenario data:",e.data),this.scenarioData=e.data.scenes||e.data,this.handleScenarioData()},fail:e=>{t("error","at pages/test/test5.vue:201","Error getting scenario data:",e)}})},handleScenarioData(){this.scenarioData?this.description=this.scenarioData.description||"无法获取背景信息":(t("warn","at pages/test/test5.vue:209","Background information not found in scenario data"),this.description="无法获取背景信息")}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("image",{class:"background-image",src:B,mode:"aspectFill"}),e.createElementVNode("view",{class:"banner-container"},[e.createElementVNode("image",{class:"logo",src:O,mode:"aspectFit"}),e.createElementVNode("text",{class:"room-text"},"三楼电梯间")]),e.createElementVNode("view",{class:"options-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.scenarioData&&n.scenarioData.options?n.scenarioData.options:[],((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["text-box",{selected:n.selectedOptionIndex===a}]),onClick:e=>r.selectOption(a)},[e.createElementVNode("text",{class:"text-content",style:e.normalizeStyle({color:t.textColor||"white"})},e.toDisplayString(t.text),5)],10,["onClick"])))),128))]),e.createElementVNode("view",{class:"button-container"},[e.createElementVNode("view",{class:"continue-button",onClick:a[0]||(a[0]=(...e)=>r.nextPage&&r.nextPage(...e))},[e.createElementVNode("text",{class:"arrow"},"→")])])])}],["__scopeId","data-v-17ab9ced"]]),$="/static/icon3.png";const R=a({components:{OnboardingChatBubble:a({props:{userName:{type:String,required:!0},avatar:{type:String,required:!0},dismiss:{type:Function,required:!0},description:{type:String,default:"这里是描述信息"}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"bubble-container"},[e.createElementVNode("view",{class:"text-box"},[e.createElementVNode("view",{class:"user-info"},[e.createElementVNode("image",{class:"user-avatar",src:s.avatar,mode:"aspectFill"},null,8,["src"]),e.createElementVNode("text",{class:"user-name"},e.toDisplayString(s.userName),1),e.createElementVNode("image",{class:"name-background",src:"/static/rec-right.png",mode:"aspectFill"})]),e.createElementVNode("text",{class:"text-content"},e.toDisplayString(s.description),1),e.createElementVNode("view",{class:"expand-icon",onClick:a[0]||(a[0]=(...e)=>s.dismiss&&s.dismiss(...e))},[e.createElementVNode("image",{class:"icon-image",src:$,mode:"aspectFit"})])])])}],["__scopeId","data-v-7e0d5e45"]])},data:()=>({userId:"",username:"",gender:"",selectedOptions:[],npcName:"",npcAvatar:"",birthday:null,scenarioData:null,background:"",description:"",jobId:"",firstScene:!1,baseURL:"https://eqmaster.azurewebsites.net"}),onLoad(e){var a;if(t("log","at pages/test/test1.vue:43","Received options:",e),this.userId=e.userId||"",this.username=decodeURIComponent(e.username||""),this.gender=e.gender||"",this.jobId=e.jobId||"",this.background=e.background||"",this.firstScene=e.firstScene||!1,t("log","at pages/test/test1.vue:53","first scene?",e.firstScene||!1),e.background?(t("log","at pages/test/test1.vue:56","analysing background:"),this.npcName=function(e){const t=e.match(/(小李|小王)(?!.*(小李|小王))/);return t?t[0]:"老板"}(e.background),this.npcAvatar="小李"==(a=this.npcName)?"/static/npc1.png":"小王"==a?"/static/npc2.png":"/static/npc3.png"):t("error","at pages/test/test1.vue:60","not passing background"),e.options)try{this.selectedOptions=JSON.parse(decodeURIComponent(e.options))}catch(s){t("error","at pages/test/test1.vue:67","Error parsing options:",s),this.selectedOptions=[]}if(e.birthday)try{this.birthday=JSON.parse(decodeURIComponent(e.birthday))}catch(s){t("error","at pages/test/test1.vue:76","Error parsing birthday:",s),this.birthday=null}t("log","at pages/test/test1.vue:81","Parsed data:",{userId:this.userId,username:this.username,gender:this.gender,selectedOptions:this.selectedOptions,birthday:this.birthday}),this.getScenarioData()},methods:{navigateToTest1(){t("log","at pages/test/test1.vue:93","clicked dismiss");const e=`/pages/test/test2?jobId=${this.jobId}&userId=${this.userId}&username=${encodeURIComponent(this.username)}&gender=${this.gender}&birthday=${encodeURIComponent(JSON.stringify(this.birthday))}&options=${encodeURIComponent(JSON.stringify(this.selectedOptions))}`;uni.navigateTo({url:e})},getScenarioData(){const e=this.firstScene?`${this.baseURL}/start_scenario/${this.jobId}`:`${this.baseURL}/get_current_scenario/${this.jobId}`;uni.request({url:e,method:"POST",success:e=>{t("log","at pages/test/test1.vue:109","Scenario data:",e.data),this.scenarioData=e.data,this.handleScenarioData()},fail:e=>{t("error","at pages/test/test1.vue:114","Error getting scenario data:",e)}})},handleScenarioData(){this.scenarioData?this.description=this.scenarioData.scenes.description||"无法获取背景信息":(t("warn","at pages/test/test1.vue:122","Background information not found in scenario data"),this.description="无法获取背景信息")}}},[["render",function(t,a,s,o,n,r){const i=e.resolveComponent("onboarding-chat-bubble");return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("image",{class:"background-image",src:B,mode:"aspectFill"}),e.createElementVNode("view",{class:"banner-container"},[e.createElementVNode("image",{class:"logo",src:O,mode:"aspectFit"}),e.createElementVNode("text",{class:"room-text"},"三楼电梯间")]),e.createVNode(i,{userName:n.npcName,avatar:n.npcAvatar,dismiss:r.navigateToTest1,description:n.description},null,8,["userName","avatar","dismiss","description"])])}],["__scopeId","data-v-78004163"]]);const j=a({data:()=>({userId:"",username:"",gender:"",selectedOptions:[],birthday:null,scenarioData:null,background:"请点击下方箭头继续",jobId:""}),onLoad(e){if(t("log","at pages/test/test.vue:31","Received options:",e),this.userId=e.userId||"",this.username=decodeURIComponent(e.username||""),this.gender=e.gender||"",e.options)try{this.selectedOptions=JSON.parse(decodeURIComponent(e.options))}catch(a){t("error","at pages/test/test.vue:42","Error parsing options:",a),this.selectedOptions=[]}if(e.birthday)try{this.birthday=JSON.parse(decodeURIComponent(e.birthday))}catch(a){t("error","at pages/test/test.vue:51","Error parsing birthday:",a),this.birthday=null}t("log","at pages/test/test.vue:56","Parsed data:",{userId:this.userId,username:this.username,gender:this.gender,selectedOptions:this.selectedOptions,birthday:this.birthday}),this.sendDataToBackend()},methods:{navigateToTest1(){const e=`/pages/test/test1?firstScene=true&jobId=${this.jobId}&userId=${this.userId}&username=${encodeURIComponent(this.username)}&gender=${this.gender}&birthday=${encodeURIComponent(JSON.stringify(this.birthday))}&options=${encodeURIComponent(JSON.stringify(this.selectedOptions))}&background=${this.background}`;uni.navigateTo({url:e})},sendDataToBackend(){uni.request({url:"https://eqmaster.azurewebsites.net/create_profile",method:"POST",data:{name:this.username,job_level:this.jobLevel||"",gender:this.gender,concerns:this.selectedOptions},success:e=>{t("log","at pages/test/test.vue:88","Backend response:",e.data),this.jobId=e.data.job_id,this.getScenarioData()},fail:e=>{t("error","at pages/test/test.vue:95","Error sending data to backend:",e)}})},getScenarioData(){uni.request({url:`https://eqmaster.azurewebsites.net/start_scenario/${this.jobId}`,method:"POST",success:e=>{try{const a="string"==typeof e.data?JSON.parse(e.data):e.data;t("log","at pages/test/test.vue:106","Scenario data:",a),this.scenarioData=a.scenes||null,this.handleScenarioData()}catch(a){t("error","at pages/test/test.vue:110","Error parsing scenario data:",a),this.background="获取场景数据时出错。"}},fail:e=>{t("error","at pages/test/test.vue:115","Error getting scenario data:",e),this.background="无法获取场景数据。"}})},handleScenarioData(){this.scenarioData?this.background=this.scenarioData.background||"请点击下方箭头继续":this.background="请点击下方箭头继续"}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("image",{class:"background-image",src:B,mode:"aspectFill"}),e.createElementVNode("view",{class:"banner-container"},[e.createElementVNode("image",{class:"logo",src:O,mode:"aspectFit"}),e.createElementVNode("text",{class:"room-text"},"三楼电梯间")]),e.createElementVNode("view",{class:"text-box"},[e.createElementVNode("text",{class:"text-content"},e.toDisplayString(n.background),1),e.createElementVNode("view",{class:"expand-icon",onClick:a[0]||(a[0]=(...e)=>r.navigateToTest1&&r.navigateToTest1(...e))},[e.createElementVNode("image",{class:"icon-image",src:$,mode:"aspectFit"})])])])}],["__scopeId","data-v-a69106a8"]]);const F=a({data:()=>({jobOptions:["难以融入新环境","棘手的同事关系","与上级维持良好关系","难回的消息","尴尬的饭局等社交场合","困难的工作沟通"],relationshipOptions:["难以维持长期关系","感情平淡期","得不到回应的喜欢","感情受到伤害"],selectedOptions:[],userId:"",username:"",gender:"",birthday:null}),onLoad(e){this.userId=e.userId,this.username=decodeURIComponent(e.username),this.gender=e.gender;const a={year:2e3,month:1,day:1};if(e.birthday)try{this.birthday=JSON.parse(decodeURIComponent(e.birthday))}catch(s){t("error","at pages/preference/preference2.vue:70","JSON 解析错误:",s),this.birthday=a}else this.birthday=a;t("log","at pages/preference/preference2.vue:76","Received data:",{userId:this.userId,username:this.username,gender:this.gender,birthday:this.birthday})},methods:{toggleOption(e){const a=this.selectedOptions.indexOf(e);a>-1?this.selectedOptions.splice(a,1):this.selectedOptions.push(e),t("log","at pages/preference/preference2.vue:91","Selected options:",this.selectedOptions)},goToNextPage(){if(this.selectedOptions.length>0){const e=`/pages/preference/preference3?userId=${this.userId}&username=${encodeURIComponent(this.username)}&gender=${this.gender}&birthday=${encodeURIComponent(JSON.stringify(this.birthday))}&options=${encodeURIComponent(JSON.stringify(this.selectedOptions))}`;t("log","at pages/preference/preference2.vue:99","Navigating to:",e),uni.navigateTo({url:e,fail:e=>{t("error","at pages/preference/preference2.vue:103","Navigation failed:",e),uni.showToast({title:"页面跳转失败",icon:"none"})}})}else t("log","at pages/preference/preference2.vue:111","No options selected"),uni.showToast({title:"请至少选择一个选项",icon:"none"})}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"text-content"},[e.createElementVNode("text",{class:"question"},"🤔 你希望提升哪些方面的高情商应对能力呢？")]),e.createElementVNode("view",{class:"options-container"},[e.createElementVNode("view",{class:"option-group"},[e.createElementVNode("view",{class:"group-icon"},[e.createElementVNode("image",{class:"icon",src:"/static/jobicon.png",mode:"scaleToFill"})]),e.createElementVNode("view",{class:"option-buttons"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.jobOptions,((t,a)=>(e.openBlock(),e.createElementBlock("button",{key:a,class:e.normalizeClass(["option-button",`button-${a+1}`,{active:n.selectedOptions.includes(t)}]),onClick:e=>r.toggleOption(t)},e.toDisplayString(t),11,["onClick"])))),128))])]),e.createElementVNode("view",{class:"option-group"},[e.createElementVNode("view",{class:"group-icon"},[e.createElementVNode("image",{class:"icon",src:"/static/relationshipicon.png",mode:"scaleToFill"})]),e.createElementVNode("view",{class:"option-buttons"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.relationshipOptions,((t,a)=>(e.openBlock(),e.createElementBlock("button",{key:a,class:e.normalizeClass(["option-button",{active:n.selectedOptions.includes(t)}]),onClick:e=>r.toggleOption(t)},e.toDisplayString(t),11,["onClick"])))),128))])])]),e.createElementVNode("view",{class:"button-container"},[e.createElementVNode("view",{class:"continue-button",onClick:a[0]||(a[0]=e=>r.goToNextPage())},[e.createElementVNode("text",{class:"arrow"},"→")])])])}],["__scopeId","data-v-269e441c"]]);const U=a({components:{DatePicker:a({data(){const e=new Date,t=[],a=e.getFullYear(),s=[],o=e.getMonth()+1,n=[],r=e.getDate();for(let i=2e3;i<=a;i++)t.push(i);for(let i=1;i<=12;i++)s.push(i);for(let i=1;i<=31;i++)n.push(i);return{title:"picker-view",years:t,year:a,months:s,month:o,days:n,day:r,value:[a-2e3,o-1,r-1],result:[],indicatorStyle:"height: 50px;",userId:"",username:"",gender:""}},created(){t("log","at components/DatePicker.vue:61","初始化月份:",this.months),t("log","at components/DatePicker.vue:62","初始化日期:",this.days),t("log","at components/DatePicker.vue:63","初始化年份:",this.years),this.$emit("dateChanged",{year:this.year,month:this.month,day:this.day})},methods:{bindChange(e){const a=e.detail.value;this.result=a,this.year=this.years[a[0]],this.month=this.months[a[1]],this.day=this.days[a[2]],t("log","at components/DatePicker.vue:77",this.year,this.month,this.day),this.$emit("dateChanged",{year:this.year,month:this.month,day:this.day})}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"date-picker-container"},[e.createElementVNode("view",{class:"mask top"}),e.createElementVNode("picker-view",{class:"picker-view","indicator-style":n.indicatorStyle,value:n.value,onChange:a[0]||(a[0]=(...e)=>r.bindChange&&r.bindChange(...e))},[e.createElementVNode("picker-view-column",{class:"picker-view-column"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.years,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"item",key:a},[e.createElementVNode("text",{class:"text"},e.toDisplayString(t)+"年",1)])))),128))]),e.createElementVNode("picker-view-column",{class:"picker-view-column"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.months,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"item",key:a},[e.createElementVNode("text",{class:"text"},e.toDisplayString(t)+"月",1)])))),128))]),e.createElementVNode("picker-view-column",{class:"picker-view-column"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.days,((t,a)=>(e.openBlock(),e.createElementBlock("view",{class:"item",key:a},[e.createElementVNode("text",{class:"text"},e.toDisplayString(t)+"日",1)])))),128))])],40,["indicator-style","value"]),e.createElementVNode("view",{class:"mask bottom"})])}],["__scopeId","data-v-1b3f13fe"]])},data:()=>({year:"",month:"",day:"",title:"picker-view",result:[],indicatorStyle:"height: 50px;",userId:"",username:"",gender:""}),onLoad(e){this.userId=e.userId,this.username=decodeURIComponent(e.username),this.gender=e.gender,t("log","at pages/preference/preference1.vue:44","preference initiated.")},methods:{goToNextPage(){const e={year:this.year,month:this.month,day:this.day},t=`/pages/preference/preference2?userId=${this.userId}&username=${encodeURIComponent(this.username)}&gender=${this.gender}&birthday=${encodeURIComponent(JSON.stringify(e))}`;uni.navigateTo({url:t})},onDateChanged(e){t("log","at pages/preference/preference1.vue:62","接收到的日期:",e),this.year=e.year,this.month=e.month,this.day=e.day}}},[["render",function(t,a,s,o,n,r){const i=e.resolveComponent("date-picker");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("view",{class:"container"},[e.createElementVNode("image",{class:"background-image",src:"/static/picture1.png",mode:"widthFix"}),e.createElementVNode("view",{class:"text-content"},[e.createElementVNode("text",{class:"question"},"🎂 你的生日是什么时候？")]),e.createElementVNode("view",{class:"date-picker-parent"},[e.createVNode(i,{onDateChanged:r.onDateChanged},null,8,["onDateChanged"]),e.createTextVNode("> ")])]),e.createElementVNode("view",{class:"button-container"},[e.createElementVNode("view",{class:"continue-button",onClick:a[0]||(a[0]=e=>r.goToNextPage())},[e.createElementVNode("text",{class:"arrow"},"→")])])],64)}]]);const q=a({data:()=>({selectedGender:null,userId:"",username:"",backgroundImage:"/static/picture1.png"}),onLoad(e){this.userId=e.userId,this.username=decodeURIComponent(e.username),t("log","at pages/preference/preference.vue:59","User ID:",this.userId),t("log","at pages/preference/preference.vue:60","Username:",this.username)},methods:{selectGender(e){this.selectedGender=e},nextStep(){this.selectedGender?(uni.setStorageSync("gender",this.selectedGender),uni.navigateTo({url:`/pages/preference/preference1?userId=${this.userId}&username=${encodeURIComponent(this.username)}&gender=${this.selectedGender}`})):uni.showToast({title:"请选择性别",icon:"none"})}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("view",{class:"container"},[e.createElementVNode("image",{class:"background-image",src:n.backgroundImage,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"text-content"},[e.createElementVNode("text",{class:"question"},"你的性别是？")]),e.createElementVNode("view",{class:"gender-options"},[e.createElementVNode("view",{class:e.normalizeClass(["gender-option",{selected:"female"===n.selectedGender}]),onClick:a[0]||(a[0]=e=>r.selectGender("female"))},[e.createElementVNode("image",{class:"gender-icon",src:"/static/female.png"})],2),e.createElementVNode("view",{class:e.normalizeClass(["gender-option",{selected:"male"===n.selectedGender}]),onClick:a[1]||(a[1]=e=>r.selectGender("male"))},[e.createElementVNode("image",{class:"gender-icon",src:"/static/male.png"})],2),e.createElementVNode("view",{class:e.normalizeClass(["gender-option",{selected:"other"===n.selectedGender}]),onClick:a[2]||(a[2]=e=>r.selectGender("other"))},[e.createElementVNode("image",{class:"gender-icon",src:"/static/4.png"})],2)]),e.createElementVNode("view",{class:"gender-options1"},[e.createElementVNode("text",{class:"gender-label"},"女生"),e.createElementVNode("text",{class:"gender-label"},"男生"),e.createElementVNode("text",{class:"gender-label"},"其他")])]),e.createElementVNode("view",{class:"button-container"},[e.createElementVNode("view",{class:"continue-button",onClick:a[3]||(a[3]=(...e)=>r.nextStep&&r.nextStep(...e))},[e.createElementVNode("text",{class:"arrow"},"→")])])],64)}],["__scopeId","data-v-d8e5bed8"]]);const A=a({data:()=>({userInfoStyle:{bottom:"180px",left:"50%",marginLeft:"-65px"},npcName:"小李",npcAvatar:"/static/npc1.png",userId:"",username:"",gender:"",selectedOptions:[],birthday:null,scenarioData:null,description:"",selectedOptionIndex:null,num:null,jobId:null,background:"",baseURL:"https://eqmaster.azurewebsites.net"}),onLoad(e){if(this.userId=e.userId||"",this.username=decodeURIComponent(e.username||""),this.gender=e.gender||"",this.jobId=e.jobId||"",e.options)try{this.selectedOptions=JSON.parse(decodeURIComponent(e.options))}catch(a){t("error","at pages/test/test2.vue:61","Error parsing options:",a),this.selectedOptions=[]}if(e.birthday)try{this.birthday=JSON.parse(decodeURIComponent(e.birthday))}catch(a){t("error","at pages/test/test2.vue:70","Error parsing birthday:",a),this.birthday=null}t("log","at pages/test/test2.vue:75","Parsed data:",{userId:this.userId,username:this.username,gender:this.gender,selectedOptions:this.selectedOptions,birthday:this.birthday,jobId:this.jobId}),this.getScenarioData()},methods:{updateUserInfoPosition(e,t){this.userInfoStyle.left=`${e}px`,this.userInfoStyle.bottom=`${t}px`,this.userInfoStyle.marginLeft="0px"},selectOption(e){this.selectedOptionIndex=e,this.num=e+1,t("log","at pages/test/test2.vue:96","Selected option:",this.num,this.scenarioData.options[e].text),this.scenarioData.options.forEach(((t,a)=>{t.textColor=a===e?"black":"white"}))},nextPage(){null!==this.num?(t("log","at pages/test/test2.vue:112","Sending data to backend:",{choice:this.num,job_id:this.jobId}),uni.request({url:`${this.baseURL}/choose_scenario`,method:"POST",data:{choice:this.num,job_id:this.jobId},success:e=>{if(t("log","at pages/test/test2.vue:125","Full response:",e),200===e.statusCode){const a=e.data;let s;t("log","at pages/test/test2.vue:129","Response data:",a),s="Final choice made. Processing data in background."===a.message?`/pages/result/loading?jobId=${this.jobId}&userId=${this.userId}&username=${encodeURIComponent(this.username)}&gender=${this.gender}&birthday=${encodeURIComponent(JSON.stringify(this.birthday))}&options=${encodeURIComponent(JSON.stringify(this.selectedOptions))}&num=${this.num}`:`/pages/test/test3?jobId=${this.jobId}&userId=${this.userId}&username=${encodeURIComponent(this.username)}&gender=${this.gender}&birthday=${encodeURIComponent(JSON.stringify(this.birthday))}&options=${encodeURIComponent(JSON.stringify(this.selectedOptions))}&num=${this.num}`,t("log","at pages/test/test2.vue:140","Navigating to:",s),uni.navigateTo({url:s,fail:e=>{t("error","at pages/test/test2.vue:145","Navigation failed:",e),uni.showToast({title:"页面跳转失败",icon:"none"})}})}else uni.showToast({title:`请求失败，状态码：${e.statusCode}`,icon:"none"})},fail:e=>{t("error","at pages/test/test2.vue:160","Detailed error:",e),uni.showToast({title:`发生错误：${e.errMsg}`,icon:"none"})}})):uni.showToast({title:"请选择一个选项",icon:"none"})},getScenarioData(){uni.request({url:`${this.baseURL}/get_current_scenario/${this.jobId}`,method:"POST",success:e=>{t("log","at pages/test/test2.vue:173","Scenario data:",e.data),this.scenarioData=e.data.scenes||e.data,this.handleScenarioData()},fail:e=>{t("error","at pages/test/test2.vue:179","Error getting scenario data:",e)}})},handleScenarioData(){this.scenarioData?this.description=this.scenarioData.description||"无法获取背景信息":(t("warn","at pages/test/test2.vue:187","Background information not found in scenario data"),this.description="无法获取背景信息")}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("image",{class:"background-image",src:B,mode:"aspectFill"}),e.createElementVNode("view",{class:"banner-container"},[e.createElementVNode("image",{class:"logo",src:O,mode:"aspectFit"}),e.createElementVNode("text",{class:"room-text"},"三楼电梯间")]),e.createElementVNode("view",{class:"options-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.scenarioData&&n.scenarioData.options?n.scenarioData.options:[],((t,a)=>(e.openBlock(),e.createElementBlock("view",{key:a,class:e.normalizeClass(["text-box",{selected:n.selectedOptionIndex===a}]),onClick:e=>r.selectOption(a)},[e.createElementVNode("text",{class:"text-content",style:e.normalizeStyle({color:t.textColor||"white"})},e.toDisplayString(t.text),5)],10,["onClick"])))),128))]),e.createElementVNode("view",{class:"button-container"},[e.createElementVNode("view",{class:"continue-button",onClick:a[0]||(a[0]=(...e)=>r.nextPage&&r.nextPage(...e))},[e.createElementVNode("text",{class:"arrow"},"→")])])])}],["__scopeId","data-v-877efe9a"]]),L="/static/head.png";const z=a({data:()=>({score:28,maxScore:100,userId:"",username:"",gender:"",birthday:null,selectedOptions:[],jobId:null,num:null,homepageData:{response:{personal_info:{name:"",tag:"",tag_description:"",job_id:""},eq_scores:{score:0,dimension1_score:0,dimension1_detail:"",dimension2_score:0,dimension2_detail:"",dimension3_score:0,dimension3_detail:"",dimension4_score:0,dimension4_detail:"",dimension5_score:0,dimension5_detail:"",summary:"",detail:"",overall_suggestion:"",detail_summary:""},contacts:[]}},intervalId:null,showSplash:!1,progress:0,progressInterval:null,isExpanded:!1,showPopup:!1,selectedOption:"subordinate",colleagueTags:["摸鱼高手","时间管理大师","潜力股","马屁精","靠谱伙伴"],bossSubordinateTags:["完美主义者","PUA大","加班狂魔","甩锅侠","独裁者"],selectedTags:[],isProfileComplete:!1,profileName:"",roleCards:[{title:"角色卡1"},{title:"角色卡2"},{title:"角色卡3"},{title:"角色卡4"},{title:"角色卡5"}],showNewPopup:!1}),computed:{formattedBirthday(){if(this.birthday){return new Date(this.birthday.year,this.birthday.month-1,this.birthday.day).toLocaleDateString()}return"未设置"},currentMonth:()=>new Intl.DateTimeFormat("zh-CN",{month:"long"}).format(new Date),currentDate:()=>(new Date).getDate(),currentTags(){return"subordinate"===this.selectedOption?this.colleagueTags:"supervisor"===this.selectedOption||"下属"===this.selectedOption?this.bossSubordinateTags:[]},canNavigateToProfile(){return""!==this.profileName.trim()&&this.selectedTags.length>0},userCard(){const e=this.homepageData.response.eq_scores;t("log","at pages/dashboard/dashboard.vue:243","jobid:",this.jobId),t("log","at pages/dashboard/dashboard.vue:244","results for backgrounds:",e);const a=Math.min(e.dimension1_score,e.dimension2_score,e.dimension3_score,e.dimension4_score,e.dimension5_score);return a===e.dimension1_score?(t("log","at pages/dashboard/dashboard.vue:249","usercard src:","水豚"),"/static/dashboard/shuitu.png"):a===e.dimension2_score?(t("log","at pages/dashboard/dashboard.vue:252","usercard src:","猴子"),"/static/dashboard/houzi.png"):a===e.dimension3_score?(t("log","at pages/dashboard/dashboard.vue:255","usercard src:","刺猬"),"/static/dashboard/ciwei.png"):a===e.dimension4_score?(t("log","at pages/dashboard/dashboard.vue:258","usercard src:","鸵鸟"),"/static/dashboard/tuoniao.png"):a===e.dimension5_score?(t("log","at pages/dashboard/dashboard.vue:261","usercard src:","狼"),"/static/dashboard/lang.png"):void 0}},onLoad(e){t("log","at pages/dashboard/dashboard.vue:267","Received options:",e),this.userId=e.userId||"",this.username=decodeURIComponent(e.username||""),this.jobId=e.jobId||"",t("log","at pages/dashboard/dashboard.vue:274","Parsed data:",{userId:this.userId,username:this.username,jobId:this.jobId}),this.getHomepageData(),this.intervalId=setInterval((()=>{this.getHomepageData()}),5e4)},onUnload(){this.intervalId&&clearInterval(this.intervalId),this.progressInterval&&clearInterval(this.progressInterval)},methods:{progressWidth(e){return`${e/this.maxScore*100}%`},circleLeftPosition(e){const a=e/this.maxScore*100,s=.8*uni.getSystemInfoSync().windowWidth;return t("log","at pages/dashboard/dashboard.vue:308",a),a/100*s},navigateToGuide(){uni.navigateTo({url:`/pages/dashboard/dashboard?userId=${this.userId}&username=${encodeURIComponent(this.username)}&jobId=${this.jobId}`})},getHomepageData(){const e=this;t("log","at pages/dashboard/dashboard.vue:318","Fetching homepage data with jobId:",this.jobId),uni.request({url:`https://eqmaster.azurewebsites.net/get_homepage/${this.jobId}`,method:"POST",success(a){200===a.statusCode?(e.homepageData=a.data,t("log","at pages/dashboard/dashboard.vue:325","Homepage data received:",e.homepageData),e.$nextTick((()=>{e.drawRadar()}))):t("error","at pages/dashboard/dashboard.vue:330","Failed to fetch homepage data:",a.statusCode)},fail(e){t("error","at pages/dashboard/dashboard.vue:334","Error fetching homepage data:",e)}})},expand(){this.isExpanded=!0},openPopup(){this.showPopup=!0},closePopup(){this.showPopup=!1},selectOption(e){this.selectedOption=e,this.selectedTags=[]},toggleTag(e){const t=this.selectedTags.indexOf(e);t>-1?this.selectedTags.splice(t,1):this.selectedTags.push(e)},createProfile(){t("log","at pages/dashboard/dashboard.vue:360","创建档案",{name:this.profileName,option:this.selectedOption,tags:this.selectedTags}),this.closePopup()},toProfilePage(){if(this.canNavigateToProfile){const e={personal_name:this.username,name:this.profileName,tag:this.selectedTags.join(","),contact_relationship:this.selectedOption};t("log","at pages/dashboard/dashboard.vue:378","Sending data to create contact profile:",e),uni.request({url:"https://eqmaster.azurewebsites.net/create_contact_profile",method:"POST",data:e,success:e=>{200===e.statusCode?(t("log","at pages/dashboard/dashboard.vue:387","Contact profile created successfully:",e.data),uni.navigateTo({url:`/pages/profile/profile?personal_name=${encodeURIComponent(this.username)}&name=${encodeURIComponent(this.profileName)}&jobId=${this.jobId}&relation=${encodeURIComponent(this.selectedOption)}&tags=${encodeURIComponent(JSON.stringify(this.selectedTags))}&contactId=${e.data.contact_id}`})):(t("error","at pages/dashboard/dashboard.vue:393","Failed to create contact profile:",e.statusCode,e.data),uni.showToast({title:`创建档案失败: ${e.statusCode}`,icon:"none"}))},fail:e=>{t("error","at pages/dashboard/dashboard.vue:401","Error creating contact profile:",e),uni.showToast({title:"网络错误，请稍后重试",icon:"none"})}})}},navigateToResult(){uni.navigateTo({url:`/pages/result/loading?jobId=${this.jobId}`})},openNewPopup(){this.showNewPopup=!0},closeNewPopup(){this.showNewPopup=!1},navigateToDashboard2(){t("log","at pages/dashboard/dashboard.vue:428","Navigating to guide with data:",{userId:this.userId,username:this.username,jobId:this.homepageData.response.personal_info.job_id}),uni.navigateTo({url:`/pages/dashboard/dashboard2?userId=${this.userId}&username=${encodeURIComponent(this.username)}&jobId=${this.homepageData.response.personal_info.job_id}`})}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("scroll-view",{"scroll-y":"",style:{height:"100%"}},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("text",{class:"score-title-head"},"早，"+e.toDisplayString(n.username)+"！",1),e.createElementVNode("image",{class:"illustration1",src:r.userCard,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"card"},[e.createElementVNode("image",{class:"illustration3",src:i,mode:"widthFix"}),e.createElementVNode("text",{class:"score-value-large"},e.toDisplayString(Math.round(120)),1),e.createElementVNode("view",{class:"progress-bar"},[e.createElementVNode("view",{class:"progress",style:e.normalizeStyle({width:r.progressWidth(n.homepageData.response.eq_scores.score)})},null,4)]),e.createElementVNode("text",{class:"card-description"},e.toDisplayString(n.homepageData.response.eq_scores.overall_suggestion),1),e.createElementVNode("image",{class:"illustration31",src:"/static/fullbutton.png",mode:"widthFix",onClick:a[0]||(a[0]=(...e)=>r.navigateToResult&&r.navigateToResult(...e))})]),e.createElementVNode("text",{class:"card-title1"},"今日锦囊"),e.createElementVNode("image",{class:"illustration32",src:"/static/tip.png",mode:"widthFix"}),e.createElementVNode("text",{class:"card-title1"},"我的人脉网"),e.createElementVNode("text",{class:"card-title15"},"AI 战略家通过分析多维关系，帮助您建立职场联系"),e.createElementVNode("view",{class:"card1"},[e.createElementVNode("text",{class:"card-title14"},"添加微信助手，获取深度职场分析！"),e.createElementVNode("image",{class:"illustration33",src:"/static/add.png",mode:"widthFix",onClick:a[1]||(a[1]=(...e)=>r.openNewPopup&&r.openNewPopup(...e))}),e.createElementVNode("image",{class:"illustration34",src:"/static/x.png",mode:"widthFix"})]),e.createElementVNode("image",{class:"illustration35",src:"/static/CTA1.png",mode:"widthFix",onClick:a[2]||(a[2]=(...e)=>r.openPopup&&r.openPopup(...e))}),e.createElementVNode("view",{class:"peoplecontain"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.roleCards,((a,s)=>(e.openBlock(),e.createElementBlock("view",{key:s,class:e.normalizeClass(["cardjuese",s%2==1?"lower-card":""])},[e.createElementVNode("view",{class:"card-a"},[e.createElementVNode("view",{class:"card1inner"},[e.createElementVNode("image",{class:"illustrationhead",src:L,mode:"widthFix"}),e.createElementVNode("view",{class:"card2inner"},[e.createElementVNode("text",{class:"usercard-title1"},e.toDisplayString(a.title),1),e.createElementVNode("text",{class:"usercard-title2"},"设计师"+e.toDisplayString(t.name),1)])]),e.createElementVNode("view",{class:"white-line"}),e.createElementVNode("text",{class:"usercard-title3"},"同事对你印象如何？导入聊天记录截图一探究竟吧！")])],2)))),128)),e.createElementVNode("view",{class:"cardjuese1",style:{visibility:"hidden"}})]),n.showPopup?(e.openBlock(),e.createElementBlock("view",{key:0,class:"popup-overlay"},[e.createElementVNode("view",{class:"popup-content",onClick:a[10]||(a[10]=e.withModifiers((()=>{}),["stop"]))},[e.createElementVNode("view",{class:"popup-header"},[e.createElementVNode("text",{class:"popup-title"},"创建人脉档案"),e.createElementVNode("text",{class:"popup-close",onClick:a[3]||(a[3]=(...e)=>r.closePopup&&r.closePopup(...e))},"×")]),e.withDirectives(e.createElementVNode("input",{class:"popup-input","onUpdate:modelValue":a[4]||(a[4]=e=>n.profileName=e),placeholder:"请输入名字"},null,512),[[e.vModelText,n.profileName]]),e.createElementVNode("view",{class:"popup-section"},[e.createElementVNode("text",{class:"popup-question"},"TA是你的？")]),e.createElementVNode("view",{class:"popup-options"},[e.createElementVNode("text",{class:e.normalizeClass(["popup-option",{active:"subordinate"===n.selectedOption}]),onClick:a[5]||(a[5]=e=>r.selectOption("subordinate"))},"同事",2),e.createElementVNode("text",{class:e.normalizeClass(["popup-option1",{active:"supervisor"===n.selectedOption}]),onClick:a[6]||(a[6]=e=>r.selectOption("supervisor"))},"老板",2),e.createElementVNode("text",{class:e.normalizeClass(["popup-option2",{active:"下属"===n.selectedOption}]),onClick:a[7]||(a[7]=e=>r.selectOption("下属"))},"下属",2)]),e.createElementVNode("view",{class:"popup-section"},[e.createElementVNode("text",{class:"popup-question"},"哪些标签可以用来形容TA？")]),e.createElementVNode("view",{class:"popup-tags"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.currentTags,(t=>(e.openBlock(),e.createElementBlock("text",{key:t,class:e.normalizeClass(["popup-tag",{active:n.selectedTags.includes(t)}]),onClick:e=>r.toggleTag(t)},e.toDisplayString(t),11,["onClick"])))),128))]),n.isExpanded?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("image",{key:0,onClick:a[8]||(a[8]=(...e)=>r.expand&&r.expand(...e)),src:T,class:"expand-image"})),e.createElementVNode("button",{class:"popup-button",onClick:a[9]||(a[9]=(...e)=>r.toProfilePage&&r.toProfilePage(...e)),style:e.normalizeStyle({opacity:r.canNavigateToProfile?1:.5})}," 创建档案 ",4)])])):e.createCommentVNode("",!0),e.createElementVNode("view",{class:"card3"},[e.createElementVNode("image",{class:"illustration36",src:"/static/Frame1.png",mode:"widthFix"}),e.createElementVNode("image",{class:"illustration37",src:"/static/Frame2.png",mode:"widthFix",onClick:a[11]||(a[11]=(...e)=>r.navigateToDashboard2&&r.navigateToDashboard2(...e))}),e.createElementVNode("image",{class:"illustration38",src:l,mode:"widthFix"})]),n.showNewPopup?(e.openBlock(),e.createElementBlock("view",{key:1,class:"popup-overlay"},[e.createElementVNode("view",{class:"popup-content",onClick:a[13]||(a[13]=e.withModifiers((()=>{}),["stop"]))},[e.createElementVNode("view",{class:"popup-header"},[e.createElementVNode("text",{class:"popup-title"}),e.createElementVNode("text",{class:"popup-close",onClick:a[12]||(a[12]=(...e)=>r.closeNewPopup&&r.closeNewPopup(...e))},"×")]),e.createElementVNode("image",{class:"illustration-qr",src:"/static/QRcode.jpg",mode:"widthFix"})])])):e.createCommentVNode("",!0)])])])}],["__scopeId","data-v-8befba34"]]),J=e.defineComponent({data:()=>({scenarioText:"",userId:"",username:"",gender:"",birthday:null,selectedOptions:[]}),onLoad(e){t("log","at pages/preference/preference3.vue:31","Raw options received in preference3:",e),this.userId=e.userId||"",this.username=decodeURIComponent(e.username||""),this.gender=e.gender||"",t("log","at pages/preference/preference3.vue:37","Parsed basic data in preference3:",{userId:this.userId,username:this.username,gender:this.gender});try{this.birthday=e.birthday?JSON.parse(decodeURIComponent(e.birthday)):null,t("log","at pages/preference/preference3.vue:46","Parsed birthday in preference3:",this.birthday)}catch(a){t("error","at pages/preference/preference3.vue:48","Error parsing birthday in preference3:",a),t("log","at pages/preference/preference3.vue:49","Raw birthday data in preference3:",e.birthday),this.birthday=null}try{const a=e.options?JSON.parse(decodeURIComponent(e.options)):[];t("log","at pages/preference/preference3.vue:56","Parsed options:",a),this.selectedOptions=Array.isArray(a)?a:[],t("log","at pages/preference/preference3.vue:61","Assigned selectedOptions:",this.selectedOptions),t("log","at pages/preference/preference3.vue:62","selectedOptions length:",this.selectedOptions.length),t("log","at pages/preference/preference3.vue:63","selectedOptions contents:",JSON.stringify(this.selectedOptions))}catch(a){t("error","at pages/preference/preference3.vue:65","Error parsing selectedOptions in preference3:",a),t("log","at pages/preference/preference3.vue:66","Raw options data in preference3:",e.options),this.selectedOptions=[]}this.userId&&this.username&&this.gender&&this.birthday&&0!==this.selectedOptions.length||t("error","at pages/preference/preference3.vue:80","Some required data is missing or invalid in preference3")},methods:{startTest(){t("log","at pages/preference/preference3.vue:85","Start test button clicked"),this.navigateToNextPage()},navigateToNextPage(){const e=`/pages/test/test?userId=${this.userId}&username=${encodeURIComponent(this.username)}&gender=${this.gender}&birthday=${encodeURIComponent(JSON.stringify(this.birthday))}&options=${encodeURIComponent(JSON.stringify(this.selectedOptions))}`;t("log","at pages/preference/preference3.vue:91","Navigating to:",e),uni.navigateTo({url:e,success:()=>{t("log","at pages/preference/preference3.vue:96","Navigation to test page successful")},fail:e=>{t("error","at pages/preference/preference3.vue:99","Navigation to test page failed:",e),uni.showToast({title:"页面跳转失败",icon:"none"})}})}}});const M=a(J,[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"text-content"},[e.createElementVNode("text",{class:"question"},e.toDisplayString(t.scenarioText||"小白？高手？你的情商在职场中属于哪一个段位呢？"),1)]),e.createElementVNode("view",{class:"card"},[e.createElementVNode("image",{class:"card-image",src:"/static/Group 3.png",mode:"aspectFit"}),e.createElementVNode("button",{class:"start-button",onClick:a[0]||(a[0]=(...e)=>t.startTest&&t.startTest(...e))},"开始测试")])])}],["__scopeId","data-v-49774eef"]]);const H=a({async mounted(){const e=await async function(e,t){return await E(e,t,[{role:"user",content:[{type:"text",text:"开始测试"}]}])}(1,"string");t("log","at pages/battlefield/battlefield-loading.vue:18","result from start field:",e),uni.setStorage({key:"chats",data:e.dialog}),uni.navigateTo({url:"/pages/battlefield/battlefield-playground"})}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"background-image loading-container"},[e.createElementVNode("image",{class:"background-image",src:w,mode:"aspectFill"}),e.createElementVNode("view",{class:"loading-text-container"},[e.createElementVNode("text",{class:"loading-text"},"聚餐中")])])}],["__scopeId","data-v-b2cb13f5"]]);const W=a({data:()=>({userInfoStyle:{bottom:"180px",left:"50%",marginLeft:"-65px"},userId:"",username:"",gender:"",selectedOptions:[],birthday:null,scenarioData:null,background:"",jobId:"",roundCount:0,num:null,baseURL:"https://eqmaster.azurewebsites.net"}),onLoad(e){if(t("log","at pages/test/test3.vue:43","Received options:",e),this.userId=e.userId||"",this.username=decodeURIComponent(e.username||""),this.gender=e.gender||"",this.jobId=e.jobId||"",e.options)try{this.selectedOptions=JSON.parse(decodeURIComponent(e.options))}catch(a){t("error","at pages/test/test3.vue:55","Error parsing options:",a),this.selectedOptions=[]}if(e.birthday)try{this.birthday=JSON.parse(decodeURIComponent(e.birthday))}catch(a){t("error","at pages/test/test3.vue:64","Error parsing birthday:",a),this.birthday=null}e.roundCount&&(this.roundCount=parseInt(e.roundCount,10)),e.num&&(this.num=parseInt(e.num,10)),t("log","at pages/test/test3.vue:77","Parsed data:",{userId:this.userId,username:this.username,gender:this.gender,selectedOptions:this.selectedOptions,birthday:this.birthday,roundCount:this.roundCount,num:this.num,jobId:this.jobId}),this.getScenarioData()},methods:{navigateToTest1(){const e=`/pages/test/test1?background=${this.background}&jobId=${this.jobId}&userId=${this.userId}&username=${encodeURIComponent(this.username)}&gender=${this.gender}&birthday=${encodeURIComponent(JSON.stringify(this.birthday))}&options=${encodeURIComponent(JSON.stringify(this.selectedOptions))}&roundCount=${this.roundCount}&num=${this.num}`;uni.navigateTo({url:e})},getScenarioData(){uni.request({url:`${this.baseURL}/get_current_scenario/${this.jobId}`,method:"POST",success:e=>{t("log","at pages/test/test3.vue:105","Scenario data:",e.data),this.scenarioData=e.data,this.handleScenarioData()},fail:e=>{t("error","at pages/test/test3.vue:111","Error getting scenario data:",e)}})},handleScenarioData(){this.scenarioData?this.background=this.scenarioData.scenes.background||"请点击下方箭头继续":this.background="请点击下方箭头继续"}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("image",{class:"background-image",src:B,mode:"aspectFill"}),e.createElementVNode("view",{class:"banner-container"},[e.createElementVNode("image",{class:"logo",src:O,mode:"aspectFit"}),e.createElementVNode("text",{class:"room-text"},"三楼电梯间")]),e.createElementVNode("view",{class:"text-box"},[e.createElementVNode("text",{class:"text-content"},e.toDisplayString(n.background),1),e.createElementVNode("view",{class:"expand-icon",onClick:a[0]||(a[0]=(...e)=>r.navigateToTest1&&r.navigateToTest1(...e)),style:{"margin-left":"auto"}},[e.createElementVNode("image",{class:"icon-image",src:$,mode:"aspectFit"})])])])}],["__scopeId","data-v-67e3b7d4"]]),G="/static/lock.png";const Q=a({data:()=>({name:"",jobId:"",relation:"",tags:[],contactId:"",score:28,maxScore:100,userId:"",username:"",gender:"",birthday:null,selectedOptions:[],num:null,homepageData:{response:{personal_info:{name:"",tag:"",tag_description:"",job_id:""},eq_scores:{score:0,dimension1_score:0,dimension1_detail:"",dimension2_score:0,dimension2_detail:"",dimension3_score:0,dimension3_detail:"",dimension4_score:0,dimension4_detail:"",dimension5_score:0,dimension5_detail:"",summary:"",detail:"",overall_suggestion:"",detail_summary:""},contacts:[]}},intervalId:null,showSplash:!1,progress:0,progressInterval:null,isExpanded:!1,showPopup:!1,selectedOption:"同事",colleagueTags:["摸鱼高手","潜力股","马屁精","靠谱伙伴"],bossSubordinateTags:["完美主义者","PUA大师","加班狂魔","甩锅侠","独裁者"],selectedTags:[],isProfileComplete:!1,profileName:"",cards:{intimacy:{unlocked:!1,score:0,description:""},opinion:{unlocked:!1,description:""}},personalName:"",editName:"",editRelation:"",editTags:[]}),computed:{formattedBirthday(){if(this.birthday){return new Date(this.birthday.year,this.birthday.month-1,this.birthday.day).toLocaleDateString()}return"未设置"},currentMonth:()=>new Intl.DateTimeFormat("zh-CN",{month:"long"}).format(new Date),currentDate:()=>(new Date).getDate(),currentTags(){return"同事"===this.editRelation?this.colleagueTags:"老板"===this.editRelation||"下属"===this.editRelation?this.bossSubordinateTags:[]},canConfirmEdit(){return""!==this.editName.trim()&&this.editTags.length>0}},onLoad(e){if(t("log","at pages/profile/profile.vue:266","Received options:",e),this.userId=e.userId||"",this.username=decodeURIComponent(e.username||""),this.gender=e.gender||"",this.jobId=e.jobId||"",this.num=e.num||"",this.personalName=decodeURIComponent(e.personal_name||""),this.name=decodeURIComponent(e.name||""),this.relation=decodeURIComponent(e.relation||""),this.contactId=e.contactId||"",e.tags)try{this.tags=JSON.parse(decodeURIComponent(e.tags))}catch(a){t("error","at pages/profile/profile.vue:288","Error parsing tags:",a),this.tags=[]}t("log","at pages/profile/profile.vue:295","Parsed data:",{userId:this.userId,username:this.username,gender:this.gender,jobId:this.jobId,num:this.num,personalName:this.personalName,name:this.name,relation:this.relation,tags:this.tags,contactId:this.contactId}),this.loadContactDetails(),this.intervalId=setInterval((()=>{this.loadContactDetails()}),5e4)},onUnload(){this.intervalId&&clearInterval(this.intervalId),this.progressInterval&&clearInterval(this.progressInterval)},methods:{progressWidth(e){return`${e/this.maxScore*100}%`},circleLeftPosition(e){const a=e/this.maxScore*100,s=.8*uni.getSystemInfoSync().windowWidth;return t("log","at pages/profile/profile.vue:340",a),a/100*s},navigateToGuide(){uni.navigateTo({url:`/pages/dashboard/dashboard?userId=${this.userId}&username=${encodeURIComponent(this.username)}&jobId=${this.jobId}`})},loadContactDetails(){const e=this;if(!this.contactId)return void t("error","at pages/profile/profile.vue:352","Contact ID is missing or invalid");const a=`https://eqmaster.azurewebsites.net/get_contact_profile/${this.contactId}`;uni.request({url:a,method:"GET",success(a){200===a.statusCode?(e.contactDetails=a.data,t("log","at pages/profile/profile.vue:365","Homepage data received:",e.contactDetails),e.$nextTick((()=>{e.drawRadar()}))):t("error","at pages/profile/profile.vue:370","Failed to fetch data:",a.statusCode,a.data)},fail(e){t("error","at pages/profile/profile.vue:374","Error fetching homepage data:",e)}})},expand(){this.isExpanded=!0},openPopup(){this.editName=this.name,this.editRelation=this.relation,this.editTags=[...this.tags],this.showPopup=!0},closePopup(){this.showPopup=!1},selectOption(e){this.editRelation=e},toggleTag(e){const t=this.editTags.indexOf(e);t>-1?this.editTags.splice(t,1):this.editTags.push(e)},confirmEdit(){this.canConfirmEdit&&(this.name=this.editName,this.relation=this.editRelation,this.tags=[...this.editTags],this.closePopup())},toProfilePage(){this.canConfirmEdit&&uni.navigateTo({url:`/pages/profile/profile?name=${encodeURIComponent(this.profileName)}&jobId=${this.jobId}&relation=${encodeURIComponent(this.selectedOption)}&tags=${encodeURIComponent(JSON.stringify(this.selectedTags))}`})},toHomePage(){this.canConfirmEdit&&uni.navigateTo({url:"/pages/dashboard/dashboard"})},goToDashboard(){uni.navigateTo({url:`/pages/dashboard/dashboard?personalName=${encodeURIComponent(this.personalName)}&jobId=${this.jobId}`})},unlockCard(e){this.cards[e].unlocked||(this.cards[e].unlocked=!0,"opinion"===e?this.cards[e].description="这是TA对你的看法。":(this.cards[e].score=Math.floor(100*Math.random()),this.cards[e].description="这是解锁后的描述文字。"))},chooseImage(){uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:e=>{const a=e.tempFilePaths;t("log","at pages/profile/profile.vue:453",a),this.uploadImage(a[0])}})},uploadImage(e){uni.uploadFile({url:"https://eqmaster.azurewebsites.net/upload_image",filePath:e,name:"file",success:e=>{t("log","at pages/profile/profile.vue:466",e.data)},fail:e=>{t("error","at pages/profile/profile.vue:470","Upload failed",e)}})}},mounted(){},beforeDestroy(){this.intervalId&&clearInterval(this.intervalId),this.progressInterval&&clearInterval(this.progressInterval)}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("scroll-view",{"scroll-y":"",style:{height:"100%"}},[e.createElementVNode("view",{class:"content"},[e.createElementVNode("image",{class:"iconback",src:C,mode:"widthFix",onClick:a[0]||(a[0]=(...e)=>r.goToDashboard&&r.goToDashboard(...e))}),e.createElementVNode("image",{class:"iconrenew",src:"/static/renew.png",mode:"widthFix"}),e.createElementVNode("view",{class:"card-a"},[e.createElementVNode("image",{class:"illustrationhead",src:L,mode:"widthFix"}),e.createElementVNode("view",{class:"card1inner"},[e.createElementVNode("view",{class:"card2inner"},[e.createElementVNode("text",{class:"usercard-title1"},e.toDisplayString(n.name),1),e.createElementVNode("image",{class:"editillustration",src:"/static/edit.png",mode:"widthFix",onClick:a[1]||(a[1]=(...e)=>r.openPopup&&r.openPopup(...e))})]),e.createElementVNode("view",{class:"popup-tags-outside"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.tags,(t=>(e.openBlock(),e.createElementBlock("text",{key:t,class:"popup-tag-outside"},e.toDisplayString(t),1)))),128))])])]),e.createElementVNode("text",{class:"card-title1"},"关系解码器"),e.createElementVNode("text",{class:"card-title15"},"一起分析聊天记录"),e.createElementVNode("view",{class:"small-card-container"},[e.createElementVNode("scroll-view",{"scroll-x":"",style:{width:"100%"}},[e.createElementVNode("view",{class:"card-wrapper"},[e.createElementVNode("view",{class:"card-b",onClick:a[2]||(a[2]=e=>r.unlockCard("intimacy"))},[e.createElementVNode("text",{class:"card-titleaa"},"基础"),e.createElementVNode("text",{class:"card-titleab"},"亲密指数"),n.cards.intimacy.unlocked?(e.openBlock(),e.createElementBlock("view",{key:1,class:"unlocked-content"},[e.createElementVNode("text",{class:"card-score"},e.toDisplayString(n.cards.intimacy.score),1),e.createElementVNode("text",{class:"card-description"},e.toDisplayString(this.contactDetails.message),1)])):(e.openBlock(),e.createElementBlock("image",{key:0,class:"illustrationlock",src:G,mode:"widthFix"}))]),e.createElementVNode("view",{class:"card-b1",onClick:a[3]||(a[3]=e=>r.unlockCard("opinion"))},[e.createElementVNode("text",{class:"card-titleaa"},"基础"),e.createElementVNode("text",{class:"card-titleab"},"TA对你的看法"),n.cards.opinion.unlocked?(e.openBlock(),e.createElementBlock("view",{key:1,class:"unlocked-content"},[e.createElementVNode("text",{class:"card-description"},e.toDisplayString(this.contactDetails.message),1)])):(e.openBlock(),e.createElementBlock("image",{key:0,class:"illustrationlock",src:G,mode:"widthFix"}))]),e.createElementVNode("view",{class:"card-b2"},[e.createElementVNode("text",{class:"card-titleaa"},"基础"),e.createElementVNode("text",{class:"card-titleab"},"PUA鉴别"),e.createElementVNode("image",{class:"illustrationlock",src:G,mode:"widthFix"})])])])]),e.createElementVNode("text",{class:"card-title1"},"妙计囊"),e.createElementVNode("text",{class:"card-title15"},"根据关系巧妙建议，祝你应对职场难题"),e.createElementVNode("image",{class:"illustration32",src:"/static/dashboard/trick-fake.png",mode:"widthFix"}),e.createElementVNode("view",{class:"upload-button",onClick:a[4]||(a[4]=(...e)=>r.chooseImage&&r.chooseImage(...e))},[e.createElementVNode("image",{class:"uploadillustration",src:"/static/Placeholder.png",mode:"widthFix"}),e.createElementVNode("text",{class:"upload-title"},"上传")]),e.createElementVNode("text",{class:"card-title16"},"更多聊天截图有助于获取更准确的分析"),n.showPopup?(e.openBlock(),e.createElementBlock("view",{key:0,class:"popup-overlay"},[e.createElementVNode("view",{class:"popup-content",onClick:a[11]||(a[11]=e.withModifiers((()=>{}),["stop"]))},[e.createElementVNode("view",{class:"popup-header"},[e.createElementVNode("text",{class:"popup-title"},"编辑人脉档案"),e.createElementVNode("text",{class:"popup-question"},"先给TA起个昵称吧！"),e.createElementVNode("text",{class:"popup-close",onClick:a[5]||(a[5]=(...e)=>r.closePopup&&r.closePopup(...e))},"×")]),e.withDirectives(e.createElementVNode("input",{class:"popup-input","onUpdate:modelValue":a[6]||(a[6]=e=>n.editName=e),placeholder:"请输入名字"},null,512),[[e.vModelText,n.editName]]),e.createElementVNode("view",{class:"popup-section"},[e.createElementVNode("text",{class:"popup-question"},"TA是你的？")]),e.createElementVNode("view",{class:"popup-options"},[e.createElementVNode("text",{class:e.normalizeClass(["popup-option",{active:"同事"===n.editRelation}]),onClick:a[7]||(a[7]=e=>r.selectOption("同事"))},"同事",2),e.createElementVNode("text",{class:e.normalizeClass(["popup-option1",{active:"老板"===n.editRelation}]),onClick:a[8]||(a[8]=e=>r.selectOption("老板"))},"老板",2),e.createElementVNode("text",{class:e.normalizeClass(["popup-option2",{active:"下属"===n.editRelation}]),onClick:a[9]||(a[9]=e=>r.selectOption("下属"))},"下属",2)]),e.createElementVNode("view",{class:"popup-section"},[e.createElementVNode("text",{class:"popup-question"},"哪些标签可以用来形容TA？")]),e.createElementVNode("view",{class:"popup-tags"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.currentTags,(t=>(e.openBlock(),e.createElementBlock("text",{key:t,class:e.normalizeClass(["popup-tag",{active:n.editTags.includes(t)}]),onClick:e=>r.toggleTag(t)},e.toDisplayString(t),11,["onClick"])))),128))]),e.createElementVNode("button",{class:"popup-button",onClick:a[10]||(a[10]=(...e)=>r.confirmEdit&&r.confirmEdit(...e)),style:e.normalizeStyle({opacity:r.canConfirmEdit?1:.5})}," 确认更改 ",4)])])):e.createCommentVNode("",!0)])])])}],["__scopeId","data-v-ef12684c"]]);const Y=a({data:()=>({username:"",password:""}),methods:{login(){uni.request({url:"http://localhost:8000/login",method:"POST",data:{username:this.username,password:this.password},success:e=>{200===e.statusCode?(uni.showToast({title:e.data.message,icon:"success"}),uni.navigateTo({url:`/pages/experience/experience?username=${this.username}`})):uni.showToast({title:e.data.detail,icon:"none"})},fail:()=>{uni.showToast({title:"请求失败",icon:"none"})}})}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"login-box"},[e.createElementVNode("text",{class:"title"},"登录"),e.withDirectives(e.createElementVNode("input",{class:"input","onUpdate:modelValue":a[0]||(a[0]=e=>n.username=e),placeholder:"请输入账号"},null,512),[[e.vModelText,n.username]]),e.withDirectives(e.createElementVNode("input",{class:"input","onUpdate:modelValue":a[1]||(a[1]=e=>n.password=e),placeholder:"请输入密码",password:""},null,512),[[e.vModelText,n.password]]),e.createElementVNode("button",{class:"button",onClick:a[2]||(a[2]=(...e)=>r.login&&r.login(...e))},"登录")])])}],["__scopeId","data-v-fdda5dea"]]);const K=a({data:()=>({username:"",backgroundImage:"/static/picture1.png"}),methods:{nextStep(){if(this.username.trim()){const e="fixedUserId12345";uni.setStorageSync("username",this.username),uni.setStorageSync("userId",e),uni.navigateTo({url:`/pages/preference/preference?userId=${e}&username=${encodeURIComponent(this.username)}`})}else uni.showToast({title:"请输入您的名字",icon:"none"})}}},[["render",function(t,a,s,o,n,r){return e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("image",{class:"background-image",src:n.backgroundImage,mode:"widthFix"},null,8,["src"]),e.createElementVNode("view",{class:"content"},[e.createElementVNode("view",{class:"text-content"},[e.createElementVNode("text",{class:"greeting"},"嗨👋"),e.createElementVNode("text",{class:"question"},"很开心见到你！你叫什么名字？")]),e.withDirectives(e.createElementVNode("input",{class:"name-input",placeholder:"请输入","onUpdate:modelValue":a[0]||(a[0]=e=>n.username=e)},null,512),[[e.vModelText,n.username]]),e.createElementVNode("view",{class:"button-container"},[e.createElementVNode("view",{class:"continue-button",onClick:a[1]||(a[1]=(...e)=>r.nextStep&&r.nextStep(...e))},[e.createElementVNode("text",{class:"arrow"},"→")])])])])}],["__scopeId","data-v-78ee8d7a"]]);__definePage("pages/landing/landing",s),__definePage("pages/battlefield/battlefield-task",r),__definePage("pages/dashboard/dashboard2",c),__definePage("pages/battlefield/battlefield-playground",V),__definePage("pages/battlefield/battlefield-intro",k),__definePage("pages/result/loading",_),__definePage("pages/result/result",D),__definePage("pages/test/test5",P),__definePage("pages/test/test1",R),__definePage("pages/test/test",j),__definePage("pages/preference/preference2",F),__definePage("pages/preference/preference1",U),__definePage("pages/preference/preference",q),__definePage("pages/test/test2",A),__definePage("pages/dashboard/dashboard",z),__definePage("pages/preference/preference3",M),__definePage("pages/battlefield/battlefield-loading",H),__definePage("pages/test/test3",W),__definePage("pages/profile/profile",Q),__definePage("pages/login/login",Y),__definePage("pages/experience/experience",K);const X={onLaunch:function(){t("log","at App.vue:5","App Launch")},onShow:function(){t("log","at App.vue:8","App Show")},onHide:function(){t("log","at App.vue:11","App Hide")},onExit:function(){t("log","at App.vue:32","App Exit")}};const{app:Z,Vuex:ee,Pinia:te}={app:e.createVueApp(X)};uni.Vuex=ee,uni.Pinia=te,Z.provide("__globalStyles",__uniConfig.styles),Z._component.mpType="app",Z._component.render=()=>{},Z.mount("#app")}(Vue);
